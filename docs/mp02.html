<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.22">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="rahicodes">

<title>Mini-Project 02 - Making Backyards Affordable for All â€“ STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-cd7454b418030687c631a6a7286fbe16.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-eca17b5da0ebcb32698e5dfc46a04a8c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Mini-Project 02 - Making Backyards Affordable for All</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>rahicodes </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This mini-project investigates how to make backyards more affordable across the United States by integrating multiple official data sources. Using Census ACS data, BLS employment and wage statistics, and building permit records, I perform data cleaning, transformation, and visualization to uncover trends in household income, rent, population, and housing development. The goal is to create actionable insights that policymakers, urban planners, and community organizations can use to support equitable access to backyard spaces. This project demonstrates proficiency in data integration, statistical analysis, and effective visualization for real-world economic and social applications.</p>
</section>
<section id="data-acquisition-and-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-acquisition-and-preparation">Data Acquisition and Preparation</h2>
</section>
<section id="task-1-data-import" class="level2">
<h2 class="anchored" data-anchor-id="task-1-data-import">TASK 1: Data Import</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Data acquisition (fixed)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>))){</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>), <span class="at">showWarnings=</span><span class="cn">FALSE</span>, <span class="at">recursive=</span><span class="cn">TRUE</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>library <span class="ot">&lt;-</span> <span class="cf">function</span>(pkg){</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Mask base::library() to automatically install packages if needed</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Masking is important here so downlit picks up packages and links</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="do">## to documentation</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    pkg <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">substitute</span>(pkg))</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cloud.r-project.org"</span>))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(pkg, <span class="at">character.only=</span><span class="cn">TRUE</span>, <span class="at">quietly=</span><span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(pkg)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">require</span>(pkg, <span class="at">character.only=</span><span class="cn">TRUE</span>, <span class="at">quietly=</span><span class="cn">TRUE</span>))</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>get_acs_all_years <span class="ot">&lt;-</span> <span class="cf">function</span>(variable, <span class="at">geography=</span><span class="st">"cbsa"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>                              <span class="at">start_year=</span><span class="dv">2009</span>, <span class="at">end_year=</span><span class="dv">2023</span>){</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"{variable}_{geography}_{start_year}_{end_year}.csv"</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, fname)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_year, end_year)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        YEARS <span class="ot">&lt;-</span> YEARS[YEARS <span class="sc">!=</span> <span class="dv">2020</span>] <span class="co"># Drop 2020 - No survey (covid)</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(YEARS, <span class="cf">function</span>(yy){</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>            tidycensus<span class="sc">::</span><span class="fu">get_acs</span>(geography, variable, <span class="at">year=</span>yy, <span class="at">survey=</span><span class="st">"acs1"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">year=</span>yy) <span class="sc">|&gt;</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(<span class="sc">-</span>moe, <span class="sc">-</span>variable) <span class="sc">|&gt;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rename</span>(<span class="sc">!!</span><span class="at">variable :=</span> estimate)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>        }) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>()</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(ALL_DATA, fname)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Household income (12 month)</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>INCOME <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B19013_001"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">household_income =</span> B19013_001)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly rent</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>RENT <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B25064_001"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">monthly_rent =</span> B25064_001)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Total population</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>POPULATION <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B01003_001"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">population =</span> B01003_001)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of households</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>HOUSEHOLDS <span class="ot">&lt;-</span> <span class="fu">get_acs_all_years</span>(<span class="st">"B11001_001"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">households =</span> B11001_001)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>get_building_permits <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">start_year =</span> <span class="dv">2009</span>, <span class="at">end_year =</span> <span class="dv">2023</span>){</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"housing_units_{start_year}_{end_year}.csv"</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, fname)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>        HISTORICAL_YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_year, <span class="dv">2018</span>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>        HISTORICAL_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(HISTORICAL_YEARS, <span class="cf">function</span>(yy){</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>            historical_url <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"https://www.census.gov/construction/bps/txt/tb3u{yy}.txt"</span>)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>            LINES <span class="ot">&lt;-</span> <span class="fu">readLines</span>(historical_url)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>)]</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>            CBSA_LINES <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(LINES, <span class="st">"^[[:digit:]]"</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>            CBSA <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_sub</span>(LINES[CBSA_LINES], <span class="dv">5</span>, <span class="dv">10</span>))</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>            PERMIT_LINES <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(<span class="fu">str_sub</span>(LINES, <span class="dv">48</span>, <span class="dv">53</span>), <span class="st">"[[:digit:]]"</span>)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>            PERMITS <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_sub</span>(LINES[PERMIT_LINES], <span class="dv">48</span>, <span class="dv">53</span>))</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>            <span class="fu">data_frame</span>(<span class="at">CBSA =</span> CBSA,</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>                       <span class="at">new_housing_units_permitted =</span> PERMITS, </span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>                       <span class="at">year =</span> yy)</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>        }) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>()</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>        CURRENT_YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2019</span>, end_year)</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>        CURRENT_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(CURRENT_YEARS, <span class="cf">function</span>(yy){</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>            current_url <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"https://www.census.gov/construction/bps/xls/msaannual_{yy}99.xls"</span>)</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>            temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>            <span class="fu">download.file</span>(current_url, <span class="at">destfile =</span> temp, <span class="at">mode=</span><span class="st">"wb"</span>)</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>            fallback <span class="ot">&lt;-</span> <span class="cf">function</span>(.f1, .f2){</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>                <span class="cf">function</span>(...){</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tryCatch</span>(<span class="fu">.f1</span>(...), </span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>                             <span class="at">error=</span><span class="cf">function</span>(e) <span class="fu">.f2</span>(...))</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>            reader <span class="ot">&lt;-</span> <span class="fu">fallback</span>(read_xlsx, read_xls)</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>            <span class="fu">reader</span>(temp, <span class="at">skip=</span><span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>                <span class="fu">na.omit</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(CBSA, Total) <span class="sc">|&gt;</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">year =</span> yy) <span class="sc">|&gt;</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rename</span>(<span class="at">new_housing_units_permitted =</span> Total)</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>        }) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>()</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">rbind</span>(HISTORICAL_DATA, CURRENT_DATA)</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(ALL_DATA, fname)</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>PERMITS <span class="ot">&lt;-</span> <span class="fu">get_building_permits</span>()</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>get_bls_industry_codes <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, <span class="st">"bls_industry_codes.csv"</span>)</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(dplyr)</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(tidyr)</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(readr)</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        resp <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.bls.gov"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_url_path</span>(<span class="st">"cew"</span>, <span class="st">"classifications"</span>, <span class="st">"industry"</span>, <span class="st">"industry-titles.htm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_headers</span>(<span class="st">`</span><span class="at">User-Agent</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_error</span>(<span class="at">is_error =</span> \(resp) <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_perform</span>()</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        <span class="fu">resp_check_status</span>(resp)</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>        naics_table <span class="ot">&lt;-</span> <span class="fu">resp_body_html</span>(resp) <span class="sc">|&gt;</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>            <span class="fu">html_element</span>(<span class="st">"#naics_titles"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>            <span class="fu">html_table</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_trim</span>(<span class="fu">str_remove</span>(<span class="fu">str_remove</span>(<span class="st">`</span><span class="at">Industry Title</span><span class="st">`</span>, Code), <span class="st">"NAICS"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Industry Title</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">depth =</span> <span class="fu">if_else</span>(<span class="fu">nchar</span>(Code) <span class="sc">&lt;=</span> <span class="dv">5</span>, <span class="fu">nchar</span>(Code) <span class="sc">-</span> <span class="dv">1</span>, <span class="cn">NA</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(depth))</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>        <span class="co"># These were looked up manually on bls.gov after finding </span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>        <span class="co"># they were presented as ranges. Since there are only three</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>        <span class="co"># it was easier to manually handle than to special-case everything else</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>        naics_missing <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>            <span class="sc">~</span>Code, <span class="sc">~</span>title, <span class="sc">~</span>depth, </span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>            <span class="st">"31"</span>, <span class="st">"Manufacturing"</span>, <span class="dv">1</span>,</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>            <span class="st">"32"</span>, <span class="st">"Manufacturing"</span>, <span class="dv">1</span>,</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>            <span class="st">"33"</span>, <span class="st">"Manufacturing"</span>, <span class="dv">1</span>,</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>            <span class="st">"44"</span>, <span class="st">"Retail"</span>, <span class="dv">1</span>, </span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>            <span class="st">"45"</span>, <span class="st">"Retail"</span>, <span class="dv">1</span>,</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>            <span class="st">"48"</span>, <span class="st">"Transportation and Warehousing"</span>, <span class="dv">1</span>, </span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>            <span class="st">"49"</span>, <span class="st">"Transportation and Warehousing"</span>, <span class="dv">1</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>        naics_table <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(naics_table, naics_missing)</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>        naics_table <span class="ot">&lt;-</span> naics_table <span class="sc">|&gt;</span> </span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(depth <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level4_title=</span>title) <span class="sc">|&gt;</span> </span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">level1_code =</span> <span class="fu">str_sub</span>(Code, <span class="at">end=</span><span class="dv">2</span>), </span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>                   <span class="at">level2_code =</span> <span class="fu">str_sub</span>(Code, <span class="at">end=</span><span class="dv">3</span>), </span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>                   <span class="at">level3_code =</span> <span class="fu">str_sub</span>(Code, <span class="at">end=</span><span class="dv">4</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>            <span class="fu">left_join</span>(naics_table, <span class="fu">join_by</span>(level1_code <span class="sc">==</span> Code)) <span class="sc">|&gt;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level1_title=</span>title) <span class="sc">|&gt;</span></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>            <span class="fu">left_join</span>(naics_table, <span class="fu">join_by</span>(level2_code <span class="sc">==</span> Code)) <span class="sc">|&gt;</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level2_title=</span>title) <span class="sc">|&gt;</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>            <span class="fu">left_join</span>(naics_table, <span class="fu">join_by</span>(level3_code <span class="sc">==</span> Code)) <span class="sc">|&gt;</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level3_title=</span>title) <span class="sc">|&gt;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"depth"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">level4_code =</span> Code) <span class="sc">|&gt;</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(level1_title, level2_title, level3_title, level4_title, </span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>                   level1_code,  level2_code,  level3_code,  level4_code) <span class="sc">|&gt;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>            <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">contains</span>(<span class="st">"code"</span>), as.integer))</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(naics_table, fname)</span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>INDUSTRY_CODES <span class="ot">&lt;-</span> <span class="fu">get_bls_industry_codes</span>()</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>get_bls_qcew_annual_averages <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">start_year=</span><span class="dv">2009</span>, <span class="at">end_year=</span><span class="dv">2023</span>){</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"bls_qcew_{start_year}_{end_year}.csv.gz"</span>)</span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, fname)</span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>    YEARS <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_year, end_year)</span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>    YEARS <span class="ot">&lt;-</span> YEARS[YEARS <span class="sc">!=</span> <span class="dv">2020</span>] <span class="co"># Drop Covid year to match ACS</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">map</span>(YEARS, <span class="at">.progress=</span><span class="cn">TRUE</span>, <span class="fu">possibly</span>(<span class="cf">function</span>(yy){</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>            fname_inner <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"mp02"</span>, <span class="fu">glue</span>(<span class="st">"{yy}_qcew_annual_singlefile.zip"</span>))</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname_inner)){</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>                <span class="fu">request</span>(<span class="st">"https://www.bls.gov"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_url_path</span>(<span class="st">"cew"</span>, <span class="st">"data"</span>, <span class="st">"files"</span>, yy, <span class="st">"csv"</span>,</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">glue</span>(<span class="st">"{yy}_annual_singlefile.zip"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_headers</span>(<span class="st">`</span><span class="at">User-Agent</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_retry</span>(<span class="at">max_tries=</span><span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">req_perform</span>(fname_inner)</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(<span class="fu">file.info</span>(fname_inner)<span class="sc">$</span>size <span class="sc">&lt;</span> <span class="fl">755e5</span>){</span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>                <span class="fu">warning</span>(<span class="fu">sQuote</span>(fname_inner), <span class="st">"appears corrupted. Please delete and retry this step."</span>)</span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>            <span class="fu">read_csv</span>(fname_inner, </span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>                     <span class="at">show_col_types=</span><span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">YEAR =</span> yy) <span class="sc">|&gt;</span></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(area_fips, </span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a>                       industry_code, </span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>                       annual_avg_emplvl, </span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a>                       total_annual_wages, </span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a>                       YEAR) <span class="sc">|&gt;</span></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(<span class="fu">nchar</span>(industry_code) <span class="sc">&lt;=</span> <span class="dv">5</span>, </span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">str_starts</span>(area_fips, <span class="st">"C"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(<span class="fu">str_detect</span>(industry_code, <span class="st">"-"</span>, <span class="at">negate=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">FIPS =</span> area_fips, </span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a>                       <span class="at">INDUSTRY =</span> <span class="fu">as.integer</span>(industry_code), </span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a>                       <span class="at">EMPLOYMENT =</span> <span class="fu">as.integer</span>(annual_avg_emplvl), </span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a>                       <span class="at">TOTAL_WAGES =</span> total_annual_wages) <span class="sc">|&gt;</span></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(<span class="sc">-</span>area_fips, </span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">-</span>industry_code, </span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">-</span>annual_avg_emplvl, </span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">-</span>total_annual_wages) <span class="sc">|&gt;</span></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>                <span class="co"># 10 is a special value: "all industries" , so omit</span></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(INDUSTRY <span class="sc">!=</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">AVG_WAGE =</span> TOTAL_WAGES <span class="sc">/</span> EMPLOYMENT)</span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>        })) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>()</span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a>        <span class="fu">write_csv</span>(ALL_DATA, fname)</span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a>    ALL_DATA <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(fname, <span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a>    ALL_DATA_YEARS <span class="ot">&lt;-</span> <span class="fu">unique</span>(ALL_DATA<span class="sc">$</span>YEAR)</span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a>    YEARS_DIFF <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(YEARS, ALL_DATA_YEARS)</span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(YEARS_DIFF) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"Download failed for the following years: "</span>, YEARS_DIFF, </span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a>             <span class="st">". Please delete intermediate files and try again."</span>)</span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a>    ALL_DATA</span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a>WAGES <span class="ot">&lt;-</span> <span class="fu">get_bls_qcew_annual_averages</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="data-integration-and-initial-exploration" class="level2">
<h2 class="anchored" data-anchor-id="data-integration-and-initial-exploration">Data Integration and Initial Exploration</h2>
</section>
<section id="task-2-multi-table-questions" class="level2">
<h2 class="anchored" data-anchor-id="task-2-multi-table-questions">TASK 2: Multi-Table Questions</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize column names</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>WAGES <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> YEAR)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>PERMITS <span class="ot">&lt;-</span> PERMITS <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> year)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>INCOME <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> year)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>RENT <span class="ot">&lt;-</span> RENT <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> year)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>HOUSEHOLDS <span class="ot">&lt;-</span> HOUSEHOLDS <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> year)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>POPULATION <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> year)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="cbsa-with-most-housing-permits-20102019" class="level5">
<h5 class="anchored" data-anchor-id="cbsa-with-most-housing-permits-20102019">1. CBSA with most housing permits (2010â€“2019)</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. CBSA with most housing permits (2010â€“2019)</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Aggregate permits by CBSA for 2010-2019</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>permits_2010_2019 <span class="ot">&lt;-</span> PERMITS <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2010</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CBSA) <span class="sc">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_permits =</span> <span class="fu">sum</span>(new_housing_units_permitted, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_permits <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Build a canonical NAME per CBSA from INCOME</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#    choose the most-frequent NAME observed for each GEOID (CBSA)</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>cbsa_names <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CBSA =</span> <span class="fu">as.numeric</span>(GEOID)) <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(CBSA)) <span class="sc">%&gt;%</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CBSA, NAME, <span class="at">name =</span> <span class="st">"n"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CBSA) <span class="sc">%&gt;%</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="co"># pick a single NAME per CBSA</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CBSA, NAME)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Join and prepare display table</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>top_permits_with_names <span class="ot">&lt;-</span> permits_2010_2019 <span class="sc">%&gt;%</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cbsa_names, <span class="at">by =</span> <span class="st">"CBSA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if NAME is missing for any CBSA, fall back to "CBSA &lt;code&gt;"</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(NAME), <span class="fu">paste0</span>(<span class="st">"CBSA "</span>, CBSA), NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_permits)) <span class="sc">%&gt;%</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keep only the columns we want to display</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Metropolitan Area</span><span class="st">`</span> <span class="ot">=</span> NAME,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Total Permits</span><span class="st">`</span> <span class="ot">=</span> total_permits,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Formatted Permits</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">format</span>(total_permits, <span class="at">big.mark =</span> <span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Render an interactive datatable (top 10)</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(top_permits_with_names, <span class="dv">10</span>),</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(<span class="at">dom =</span> <span class="st">'t'</span>, <span class="at">pageLength =</span> <span class="dv">10</span>),</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> htmltools<span class="sc">::</span>tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">'caption-side: top; text-align: left; font-weight: bold;'</span>,</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Top 10 Metropolitan Areas by Housing Permits Issued (2010-2019)"</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-92088a42c92f15526331" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-92088a42c92f15526331">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold;\">Top 10 Metropolitan Areas by Housing Permits Issued (2010-2019)<\/caption>","data":[["Houston-The Woodlands-Sugar Land, TX Metro Area","Dallas-Fort Worth-Arlington, TX Metro Area","New York-Newark-Jersey City, NY-NJ-PA Metro Area","Atlanta-Sandy Springs-Roswell, GA Metro Area","Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area","Phoenix-Mesa-Scottsdale, AZ Metro Area","Seattle-Tacoma-Bellevue, WA Metro Area","Austin-Round Rock, TX Metro Area","Los Angeles-Long Beach-Anaheim, CA Metro Area","Orlando-Kissimmee-Sanford, FL Metro Area"],[482075,460826,446020,254377,232483,219939,213022,212392,184260,171588],["482,075","460,826","446,020","254,377","232,483","219,939","213,022","212,392","184,260","171,588"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metropolitan Area<\/th>\n      <th>Total Permits<\/th>\n      <th>Formatted Permits<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","pageLength":10,"columnDefs":[{"className":"dt-right","targets":1},{"name":"Metropolitan Area","targets":0},{"name":"Total Permits","targets":1},{"name":"Formatted Permits","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Identify the top metro area</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>top_cbsa <span class="ot">&lt;-</span> top_permits_with_names[<span class="dv">1</span>, ]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**ANSWER:** The metropolitan area with the most housing permits issued between 2010 and 2019 was **"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    top_cbsa[[<span class="st">"Metropolitan Area"</span>]], <span class="st">"** with a total of **"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format</span>(top_cbsa[[<span class="st">"Total Permits"</span>]], <span class="at">big.mark =</span> <span class="st">","</span>), <span class="st">"** permits.</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
**ANSWER:** The metropolitan area with the most housing permits issued between 2010 and 2019 was ** Houston-The Woodlands-Sugar Land, TX Metro Area ** with a total of ** 482,075 ** permits.</code></pre>
</div>
</div>
</section>
<section id="year-albuquerque-cbsa-10740-permitted-most-housing-units" class="level5">
<h5 class="anchored" data-anchor-id="year-albuquerque-cbsa-10740-permitted-most-housing-units">2. Year Albuquerque (CBSA 10740) permitted most housing units</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Year Albuquerque (CBSA 10740) permitted most housing units</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for Albuquerque CBSA (10740) and arrange by descending permits</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>albuquerque_permits <span class="ot">&lt;-</span> PERMITS <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CBSA <span class="sc">==</span> <span class="dv">10740</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(new_housing_units_permitted)) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, new_housing_units_permitted)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the permits for display</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>albuquerque_permits <span class="ot">&lt;-</span> albuquerque_permits <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">formatted_permits =</span> <span class="fu">format</span>(new_housing_units_permitted, <span class="at">big.mark =</span> <span class="st">","</span>))</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the table using DT</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  albuquerque_permits,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Housing Units Permitted"</span>, <span class="st">"Formatted Permits"</span>),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">15</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Housing Permits in Albuquerque, NM (CBSA 10740) by Year"</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="at">fontSize =</span> <span class="st">'14px'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-72983102df80dd947c1d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-72983102df80dd947c1d">{"x":{"filter":"none","vertical":false,"caption":"<caption>Housing Permits in Albuquerque, NM (CBSA 10740) by Year<\/caption>","data":[[2021,2022,2023,2013,2014,2016,2015,2017,2018,2019,2012,2020,2010,2009,2011],[4021,2852,2834,2606,2543,2465,2295,2256,2186,2148,2084,2014,1764,1692,1634],["4,021","2,852","2,834","2,606","2,543","2,465","2,295","2,256","2,186","2,148","2,084","2,014","1,764","1,692","1,634"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Year<\/th>\n      <th>Housing Units Permitted<\/th>\n      <th>Formatted Permits<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":15,"dom":"t","ordering":false,"columnDefs":[{"className":"dt-right","targets":[0,1]},{"name":"year","targets":0},{"name":"new_housing_units_permitted","targets":1},{"name":"formatted_permits","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[0]; $(this.api().cell(row, 0).node()).css({'font-size':'14px'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'font-size':'14px'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify the peak year</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>peak_year <span class="ot">&lt;-</span> albuquerque_permits[<span class="dv">1</span>, ]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**ANSWER:** Albuquerque, NM permitted the most new housing units in **"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    peak_year<span class="sc">$</span>year, <span class="st">"** with **"</span>, peak_year<span class="sc">$</span>formatted_permits, <span class="st">" permits**.</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
**ANSWER:** Albuquerque, NM permitted the most new housing units in ** 2021 ** with ** 4,021  permits**.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">*Note: The peak in 2021 likely reflects a COVID-19 data artifact, as there may have been pent-up demand or reporting delays from the pandemic period.*</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
*Note: The peak in 2021 likely reflects a COVID-19 data artifact, as there may have been pent-up demand or reporting delays from the pandemic period.*</code></pre>
</div>
</div>
</section>
<section id="state-with-highest-average-individual-income-2015" class="level5">
<h5 class="anchored" data-anchor-id="state-with-highest-average-individual-income-2015">3. State with highest average individual income (2015)</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. State with highest average individual income (2015)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define state abbreviation-to-name lookup table</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>state_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">abb  =</span> <span class="fu">c</span>(state.abb, <span class="st">"DC"</span>, <span class="st">"PR"</span>),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(state.name, <span class="st">"District of Columbia"</span>, <span class="st">"Puerto Rico"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary packages</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Question 3: State with Highest Average Individual Income (2015)</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate state-level average individual income for 2015</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>state_income_2015 <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(HOUSEHOLDS <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(POPULATION <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_extract</span>(NAME, <span class="st">", (.{2})"</span>, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(state), <span class="sc">!</span><span class="fu">is.na</span>(household_income), <span class="sc">!</span><span class="fu">is.na</span>(households), <span class="sc">!</span><span class="fu">is.na</span>(population)) <span class="sc">%&gt;%</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_income =</span> household_income <span class="sc">*</span> households) <span class="sc">%&gt;%</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_income =</span> <span class="fu">sum</span>(total_income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_individual_income =</span> total_income <span class="sc">/</span> total_population) <span class="sc">%&gt;%</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(state_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"abb"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_individual_income))</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Display top 10 states</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(state_income_2015, <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">income_formatted =</span> <span class="fu">paste0</span>(<span class="st">"$"</span>, <span class="fu">format</span>(<span class="fu">round</span>(avg_individual_income), <span class="at">big.mark =</span> <span class="st">","</span>))),</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"State Code"</span>, <span class="st">"Total Income"</span>, <span class="st">"Total Population"</span>, <span class="st">"Avg Individual Income"</span>, <span class="st">"State Name"</span>, <span class="st">"Formatted Income"</span>),</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageLength =</span> <span class="dv">10</span>,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">dom =</span> <span class="st">'t'</span>,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">visible =</span> <span class="cn">FALSE</span>, <span class="at">targets =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)))</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Top 10 States by Average Individual Income (2015)"</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">formatStyle</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>), <span class="at">fontSize =</span> <span class="st">'14px'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3c428cc03a07a82ae0a0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3c428cc03a07a82ae0a0">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 10 States by Average Individual Income (2015)<\/caption>","data":[["DC","MA","CT","AK","VT","NH","MN","MD","WA","CO"],[202663489140,186566282228,94480626751,13197939163,5715539271,22249129392,116902131752,93826139111,161492961867,123095455889],[6098283,6754601,3474313,499421,216661,847504,4469143,3665585,6350174,4840469],[33232.87704752305,27620.62218449321,27194.04577279019,26426.48019006009,26380.10196112821,26252.53614378221,26157.61718790381,25596.4979971819,25431.26564201233,25430.48119696666],["District of Columbia","Massachusetts","Connecticut","Alaska","Vermont","New Hampshire","Minnesota","Maryland","Washington","Colorado"],["$33,233","$27,621","$27,194","$26,426","$26,380","$26,253","$26,158","$25,596","$25,431","$25,430"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>State Code<\/th>\n      <th>Total Income<\/th>\n      <th>Total Population<\/th>\n      <th>Avg Individual Income<\/th>\n      <th>State Name<\/th>\n      <th>Formatted Income<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"dom":"t","ordering":false,"columnDefs":[{"visible":false,"targets":[0,1,2,3]},{"className":"dt-right","targets":[1,2,3]},{"name":"state","targets":0},{"name":"total_income","targets":1},{"name":"total_population","targets":2},{"name":"avg_individual_income","targets":3},{"name":"name","targets":4},{"name":"income_formatted","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'font-size':'14px'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-size':'14px'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the answer</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>top_state <span class="ot">&lt;-</span> state_income_2015[<span class="dv">1</span>, ]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**ANSWER:** The state with the highest average individual income in 2015 was **"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    top_state<span class="sc">$</span>name, <span class="st">"** with an average of **$"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format</span>(<span class="fu">round</span>(top_state<span class="sc">$</span>avg_individual_income), <span class="at">big.mark =</span> <span class="st">","</span>), <span class="st">"** per person.</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
**ANSWER:** The state with the highest average individual income in 2015 was ** District of Columbia ** with an average of **$ 33,233 ** per person.</code></pre>
</div>
</div>
</section>
<section id="last-year-nyc-cbsa-had-most-data-scientists-naics-5182" class="level5">
<h5 class="anchored" data-anchor-id="last-year-nyc-cbsa-had-most-data-scientists-naics-5182">4. Last year NYC CBSA had most Data Scientists (NAICS 5182)</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Last year NYC CBSA had most Data Scientists (NAICS 5182)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>WAGES <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CBSA_numeric =</span> <span class="fu">as.integer</span>(<span class="fu">paste0</span>(<span class="fu">str_remove</span>(FIPS, <span class="st">"^C"</span>), <span class="st">"0"</span>)))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>nyc_ds <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(INDUSTRY <span class="sc">==</span> <span class="dv">5182</span>, CBSA_numeric <span class="sc">==</span> <span class="dv">35620</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>nyc_peak <span class="ot">&lt;-</span> nyc_ds <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(EMPLOYMENT, <span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"**ANSWER 4:** Last year NYC CBSA had most Data Scientists:"</span>, nyc_peak<span class="sc">$</span>year,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"with"</span>, <span class="fu">format</span>(nyc_peak<span class="sc">$</span>EMPLOYMENT, <span class="at">big.mark=</span><span class="st">","</span>), <span class="st">"employees</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>**ANSWER 4:** Last year NYC CBSA had most Data Scientists: 2023 with 31,536 employees</code></pre>
</div>
</div>
</section>
<section id="fraction-of-total-wages-in-nyc-cbsa-earned-by-finance-insurance-naics-52" class="level5">
<h5 class="anchored" data-anchor-id="fraction-of-total-wages-in-nyc-cbsa-earned-by-finance-insurance-naics-52">5. Fraction of total wages in NYC CBSA earned by Finance &amp; Insurance (NAICS 52)</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Fraction of total wages in NYC CBSA earned by Finance &amp; Insurance (NAICS 52)</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>nyc_wages <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span> <span class="fu">filter</span>(CBSA_numeric <span class="sc">==</span> <span class="dv">35620</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>finance_wages <span class="ot">&lt;-</span> nyc_wages <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(INDUSTRY, <span class="st">"^52"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">finance_wages =</span> <span class="fu">sum</span>(TOTAL_WAGES, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.groups=</span><span class="st">"drop"</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>total_wages <span class="ot">&lt;-</span> nyc_wages <span class="sc">%&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_wages =</span> <span class="fu">sum</span>(TOTAL_WAGES, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.groups=</span><span class="st">"drop"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>finance_fraction <span class="ot">&lt;-</span> <span class="fu">left_join</span>(finance_wages, total_wages, <span class="at">by=</span><span class="st">"year"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction =</span> finance_wages <span class="sc">/</span> total_wages) <span class="sc">%&gt;%</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(fraction, <span class="at">n=</span><span class="dv">1</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"**ANSWER 5:** Finance &amp; Insurance fraction peaked in"</span>, finance_fraction<span class="sc">$</span>year,</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"at"</span>, <span class="fu">round</span>(finance_fraction<span class="sc">$</span>fraction<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>**ANSWER 5:** Finance &amp; Insurance fraction peaked in 2021 at 15.87 %</code></pre>
</div>
</div>
</section>
</section>
<section id="task-3-initial-visualizations" class="level2">
<h2 class="anchored" data-anchor-id="task-3-initial-visualizations">TASK 3: Initial Visualizations</h2>
<section id="visualization-1-monthly-rent-vs-household-income-per-cbsa-2009" class="level5">
<h5 class="anchored" data-anchor-id="visualization-1-monthly-rent-vs-household-income-per-cbsa-2009">Visualization 1: Monthly Rent vs Household Income per CBSA (2009)</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)   <span class="co"># Extra credit: color gradients</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data: 2009 CBSA-level rent and income</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>rent_income_2009 <span class="ot">&lt;-</span> RENT <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    INCOME <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>),</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(monthly_rent), <span class="sc">!</span><span class="fu">is.na</span>(household_income))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced scatter plot with full subtitle</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rent_income_2009, <span class="fu">aes</span>(<span class="at">x =</span> household_income, <span class="at">y =</span> monthly_rent, <span class="at">color =</span> monthly_rent)) <span class="sc">+</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">name =</span> <span class="st">"Monthly Rent ($)"</span>) <span class="sc">+</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Rent vs Household Income Across CBSAs (2009)"</span>,</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Each point represents a Core-Based Statistical Area (CBSA)</span><span class="sc">\n</span><span class="st">Color intensity represents higher monthly rent"</span>,</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Average Household Income (USD, thousands)"</span>,</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Monthly Rent (USD)"</span>,</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data Source: U.S. Census Bureau American Community Survey"</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualization-2-healthcare-employment-over-time" class="level5">
<h5 class="anchored" data-anchor-id="visualization-2-healthcare-employment-over-time">Visualization 2: Healthcare Employment Over Time</h5>
<section id="relationship-between-total-employment-and-healthcare-employment-across-cbsas" class="level7">
<p class="heading">Relationship between total employment and healthcare employment across CBSAs</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize CBSA codes for joining</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>census_cbsa <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">std_cbsa =</span> <span class="fu">paste0</span>(<span class="st">"C"</span>, GEOID))</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Join WAGES with CBSAs</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>wages_joined <span class="ot">&lt;-</span> WAGES <span class="sc">%&gt;%</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">std_cbsa =</span> <span class="fu">paste0</span>(<span class="fu">str_remove</span>(FIPS, <span class="st">"^C"</span>), <span class="st">"0"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(census_cbsa, <span class="at">by =</span> <span class="st">"std_cbsa"</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Fallback plot if no data</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">nrow</span>(wages_joined) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"WAGES data not available; displaying fallback sample plot."</span>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  fallback_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_employment =</span> <span class="fu">runif</span>(<span class="dv">30</span>, <span class="dv">50000</span>, <span class="fl">1e6</span>),</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">healthcare_employment =</span> <span class="fu">runif</span>(<span class="dv">30</span>, <span class="dv">10000</span>, <span class="fl">2e5</span>),</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">NAME =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Metro A"</span>,<span class="st">"Metro B"</span>,<span class="st">"Metro C"</span>), <span class="dv">30</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">sample</span>(<span class="dv">2010</span><span class="sc">:</span><span class="dv">2015</span>, <span class="dv">30</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  healthcare_viz_data <span class="ot">&lt;-</span> fallback_data</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Prepare healthcare employment data</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  healthcare_employment <span class="ot">&lt;-</span> wages_joined <span class="sc">%&gt;%</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, NAME, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_employment =</span> <span class="fu">sum</span>(EMPLOYMENT, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">healthcare_employment =</span> <span class="fu">sum</span>(EMPLOYMENT[INDUSTRY <span class="sc">==</span> <span class="dv">62</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(total_employment <span class="sc">&gt;</span> <span class="dv">50000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">healthcare_share =</span> healthcare_employment <span class="sc">/</span> total_employment)</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select top metros</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>  top_metros <span class="ot">&lt;-</span> healthcare_employment <span class="sc">%&gt;%</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_employment =</span> <span class="fu">mean</span>(total_employment, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_max</span>(avg_employment, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(NAME)</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>  healthcare_viz_data <span class="ot">&lt;-</span> healthcare_employment <span class="sc">%&gt;%</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(NAME <span class="sc">%in%</span> top_metros)</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Final visualization</span></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(healthcare_viz_data, <span class="fu">aes</span>(<span class="at">x =</span> total_employment, <span class="at">y =</span> healthcare_employment, <span class="at">color =</span> NAME)) <span class="sc">+</span></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">name =</span> <span class="st">"Metro Area"</span>) <span class="sc">+</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">"M"</span>)) <span class="sc">+</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Healthcare vs Total Employment Across CBSAs"</span>,</span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Each point represents a Core-Based Statistical Area (CBSA)</span><span class="sc">\n</span><span class="st">Color indicates metro area"</span>,</span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Total Employment (millions)"</span>,</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Healthcare Employment (thousands)"</span>,</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Bureau of Labor Statistics QCEW"</span></span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="visualization-3-average-household-size-over-time" class="level5">
<h5 class="anchored" data-anchor-id="visualization-3-average-household-size-over-time">Visualization 3: Average Household Size Over Time</h5>
<section id="the-evolution-of-average-household-size-over-time-with-different-lines-representing-different-cbsas." class="level7">
<p class="heading">The evolution of average household size over time, with different lines representing different CBSAs.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualization 3: Average Household Size Over Time</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate household size over time</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>household_size_data <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(HOUSEHOLDS, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">household_size =</span> population <span class="sc">/</span> households) <span class="sc">%&gt;%</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(household_size), household_size <span class="sc">&gt;</span> <span class="dv">1</span>, household_size <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Safe fallback if no data exists</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">nrow</span>(household_size_data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  demo_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2009</span><span class="sc">:</span><span class="dv">2019</span>, <span class="dv">3</span>),</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">metro =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Metro A"</span>, <span class="st">"Metro B"</span>, <span class="st">"Metro C"</span>), <span class="at">each =</span> <span class="dv">11</span>),</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fu">c</span>(<span class="fl">2.5</span> <span class="sc">+</span> <span class="fu">sin</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span><span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> <span class="fl">0.2</span>, <span class="fl">2.8</span> <span class="sc">+</span> <span class="fu">cos</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span><span class="sc">/</span><span class="dv">3</span>) <span class="sc">*</span> <span class="fl">0.15</span>, <span class="fl">2.3</span> <span class="sc">+</span> <span class="fu">sin</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span><span class="sc">/</span><span class="dv">4</span>) <span class="sc">*</span> <span class="fl">0.25</span>)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(demo_data, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> size, <span class="at">color =</span> metro)) <span class="sc">+</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span>   <span class="co"># slightly thicker lines</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">name =</span> <span class="st">"Metropolitan Area"</span>) <span class="sc">+</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2009</span>, <span class="dv">2019</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fl">2.0</span>, <span class="fl">3.5</span>, <span class="fl">0.2</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">2.0</span>, <span class="fl">3.5</span>)) <span class="sc">+</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Average Household Size Over Time"</span>,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">"Data unavailable - demonstration plot"</span>,</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Average Household Size (persons per household)"</span>,</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Source: Demo Data"</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">4</span>),</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"lines"</span>),  <span class="co"># smaller legend keys</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.spacing.y =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),    <span class="co"># reduce vertical spacing</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select metros with most complete data</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>  metro_completeness <span class="ot">&lt;-</span> household_size_data <span class="sc">%&gt;%</span></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">years_available =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(years_available))</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>  selected_metros <span class="ot">&lt;-</span> <span class="fu">head</span>(metro_completeness<span class="sc">$</span>NAME, <span class="dv">12</span>)</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>  viz_data <span class="ot">&lt;-</span> household_size_data <span class="sc">%&gt;%</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(NAME <span class="sc">%in%</span> selected_metros) <span class="sc">%&gt;%</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">metro_short =</span> <span class="fu">str_extract</span>(NAME, <span class="st">"^[^,]+"</span>))</span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(viz_data, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> household_size, <span class="at">color =</span> metro_short)) <span class="sc">+</span></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">name =</span> <span class="st">"Metropolitan Area"</span>) <span class="sc">+</span></span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2009</span>, <span class="dv">2023</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fl">2.0</span>, <span class="fl">3.5</span>, <span class="fl">0.2</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">2.0</span>, <span class="fl">3.5</span>)) <span class="sc">+</span></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Evolution of Average Household Size Across U.S. Metropolitan Areas"</span>,</span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">"Trends from 2009-2023 for"</span>, <span class="fu">length</span>(<span class="fu">unique</span>(viz_data<span class="sc">$</span>metro_short)), <span class="st">"metropolitan areas"</span>),</span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Average Household Size (persons per household)"</span>,</span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Source: U.S. Census Bureau American Community Survey"</span></span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fl">5.5</span>),</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"lines"</span>),</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.spacing.y =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">3</span>), <span class="at">ncol =</span> <span class="dv">2</span>))</span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="building-indices-of-housing-affordability-and-housing-stock-growth" class="level1">
<h1>Building Indices of Housing Affordability and Housing Stock Growth</h1>
<section id="task-4-measuring-rent-burden" class="level2">
<h2 class="anchored" data-anchor-id="task-4-measuring-rent-burden">TASK 4: Measuring Rent Burden</h2>
<section id="create-a-rent-burden-metric" class="level5">
<h5 class="anchored" data-anchor-id="create-a-rent-burden-metric">CREATE A RENT BURDEN METRIC</h5>
<p>Generate a relevant measure of rent burden using the rent-to-income ratio, standardized for interpretability.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine income and rent datasets</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>rent_burden_data <span class="ot">&lt;-</span> INCOME <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(RENT, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(household_income), <span class="sc">!</span><span class="fu">is.na</span>(monthly_rent)) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">annual_rent =</span> monthly_rent <span class="sc">*</span> <span class="dv">12</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">raw_rent_burden =</span> annual_rent <span class="sc">/</span> household_income,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cap implausibly large ratios (to reduce influence of outliers)</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">raw_rent_burden =</span> <span class="fu">pmin</span>(raw_rent_burden, <span class="fl">1.5</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(raw_rent_burden), raw_rent_burden <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Establish a baseline: national average rent burden in 2009</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>baseline_burden <span class="ot">&lt;-</span> rent_burden_data <span class="sc">%&gt;%</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">baseline =</span> <span class="fu">mean</span>(raw_rent_burden, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(baseline)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"2009 national average rent burden:"</span>, <span class="fu">round</span>(baseline_burden <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>2009 national average rent burden: 19.4 %</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize metric relative to the baseline (scale = 0â€“100)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>rent_burden_final <span class="ot">&lt;-</span> rent_burden_data <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">burden_ratio =</span> raw_rent_burden <span class="sc">/</span> baseline_burden,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_burden_index =</span> <span class="dv">50</span> <span class="sc">*</span> burden_ratio,  <span class="co"># 50 = 2009 baseline</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_burden_index =</span> <span class="fu">pmin</span>(rent_burden_index, <span class="dv">150</span>)  <span class="co"># Cap extreme values</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Rent burden index range:"</span>, </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="fu">min</span>(rent_burden_final<span class="sc">$</span>rent_burden_index)), <span class="st">"â€“"</span>, </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="fu">max</span>(rent_burden_final<span class="sc">$</span>rent_burden_index)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rent burden index range: 32 â€“ 98 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Interpretation: 50 = 2009 national average; 100 = double the 2009 burden.</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Interpretation: 50 = 2009 national average; 100 = double the 2009 burden.</code></pre>
</div>
</div>
</section>
<section id="table-1-rent-burden-trends-for-a-single-metro-over-time" class="level5">
<h5 class="anchored" data-anchor-id="table-1-rent-burden-trends-for-a-single-metro-over-time">Table 1: Rent Burden Trends for a Single Metro Over Time</h5>
<p>This section displays the rent burden trend for one metropolitan area with complete data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"rent_burden_final"</span>) <span class="sc">||</span> <span class="fu">nrow</span>(rent_burden_final) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"ERROR: rent_burden_final dataset missing or empty.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"rent_burden_final contains"</span>, <span class="fu">nrow</span>(rent_burden_final), <span class="st">"records.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Example metros:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">head</span>(<span class="fu">unique</span>(rent_burden_final<span class="sc">$</span>NAME), <span class="dv">5</span>))</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Years included:"</span>, <span class="fu">paste</span>(<span class="fu">sort</span>(<span class="fu">unique</span>(rent_burden_final<span class="sc">$</span>year)), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select metro with the most complete time-series data</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  selected_metro <span class="ot">&lt;-</span> rent_burden_final <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(NAME, <span class="at">name =</span> <span class="st">"obs"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(obs)) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(NAME)</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract and format rent burden metrics for the selected metro</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  metro_burden <span class="ot">&lt;-</span> rent_burden_final <span class="sc">%&gt;%</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(NAME <span class="sc">==</span> selected_metro) <span class="sc">%&gt;%</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">rent_pct =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(raw_rent_burden <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>),</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">burden_idx =</span> <span class="fu">round</span>(rent_burden_index, <span class="dv">1</span>)</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, rent_pct, burden_idx)</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"**"</span>, selected_metro, <span class="st">"**</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"| Year | Rent as % of Income | Burden Index |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"|------|---------------------|---------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply</span>(metro_burden, <span class="dv">1</span>, <span class="cf">function</span>(row) {</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|"</span>, row[<span class="st">"year"</span>], <span class="st">"|"</span>, row[<span class="st">"rent_pct"</span>], <span class="st">"|"</span>, row[<span class="st">"burden_idx"</span>], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Describe the trend direction</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  first_val <span class="ot">&lt;-</span> metro_burden<span class="sc">$</span>burden_idx[<span class="dv">1</span>]</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>  last_val <span class="ot">&lt;-</span> metro_burden<span class="sc">$</span>burden_idx[<span class="fu">nrow</span>(metro_burden)]</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>  trend <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(last_val <span class="sc">&gt;</span> first_val, <span class="st">"increased"</span>, <span class="st">"decreased"</span>)</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**Observation:** Rent burden has"</span>, trend, <span class="st">"over time in this metro.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>rent_burden_final contains 7279 records.
Example metros:
[1] "Aberdeen, WA Micro Area"                       
[2] "Abilene, TX Metro Area"                        
[3] "Adrian, MI Micro Area"                         
[4] "Aguadilla-Isabela-San Sebasti?n, PR Metro Area"
[5] "Akron, OH Metro Area"                          

Years included: 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2021, 2022, 2023 

** Aberdeen, WA Micro Area **

| Year | Rent as % of Income | Burden Index |
|------|---------------------|---------------|
| 2009 | 21.5% | 55.3 |
| 2010 | 20.8% | 53.5 |
| 2011 | 19.7% | 50.8 |
| 2012 | 18.5% | 47.6 |
| 2013 | 22.5% | 58.1 |
| 2014 | 22.7% | 58.4 |
| 2015 | 20.4% | 52.5 |
| 2016 | 17.3% | 44.6 |
| 2017 | 18.4% | 47.4 |
| 2018 | 18.2% | 46.8 |
| 2019 | 16.9% | 43.4 |
| 2021 | 18.9% | 48.6 |
| 2022 | 17.9% | 46.0 |
| 2023 | 18.6% | 47.9 |

**Observation:** Rent burden has decreased over time in this metro.</code></pre>
</div>
</div>
</section>
<section id="table-2-comparing-metros---highest-and-lowest-rent-burden-areas" class="level5">
<h5 class="anchored" data-anchor-id="table-2-comparing-metros---highest-and-lowest-rent-burden-areas">Table 2: Comparing Metros - Highest and Lowest Rent Burden Areas</h5>
<p>This summarizes the most and least rent-burdened areas in recent years (2019 onward).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>recent_burden <span class="ot">&lt;-</span> rent_burden_final <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_index =</span> <span class="fu">mean</span>(rent_burden_index, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ratio =</span> <span class="fu">mean</span>(raw_rent_burden, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_index))</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(recent_burden) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No recent rent burden data found.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"**Top 10 Metros with Highest Rent Burden (2019+)**</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  top_burden <span class="ot">&lt;-</span> recent_burden <span class="sc">%&gt;%</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">rent_share =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(avg_ratio <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">index_fmt =</span> <span class="fu">round</span>(avg_index, <span class="dv">1</span>)</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"| Metropolitan Area | Avg Rent/Income | Burden Index |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"|-------------------|-----------------|---------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply</span>(top_burden, <span class="dv">1</span>, <span class="cf">function</span>(row) {</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|"</span>, row[<span class="st">"NAME"</span>], <span class="st">"|"</span>, row[<span class="st">"rent_share"</span>], <span class="st">"|"</span>, row[<span class="st">"index_fmt"</span>], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**Bottom 10 Metros with Lowest Rent Burden (2019+)**</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  bottom_burden <span class="ot">&lt;-</span> recent_burden <span class="sc">%&gt;%</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(avg_index) <span class="sc">%&gt;%</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">rent_share =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(avg_ratio <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>),</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">index_fmt =</span> <span class="fu">round</span>(avg_index, <span class="dv">1</span>)</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"| Metropolitan Area | Avg Rent/Income | Burden Index |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"|-------------------|-----------------|---------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply</span>(bottom_burden, <span class="dv">1</span>, <span class="cf">function</span>(row) {</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|"</span>, row[<span class="st">"NAME"</span>], <span class="st">"|"</span>, row[<span class="st">"rent_share"</span>], <span class="st">"|"</span>, row[<span class="st">"index_fmt"</span>], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**Summary:**"</span>, <span class="fu">nrow</span>(recent_burden), </span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>      <span class="st">"metro areas analyzed for relative rent burden since 2019.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>**Top 10 Metros with Highest Rent Burden (2019+)**
| Metropolitan Area | Avg Rent/Income | Burden Index |
|-------------------|-----------------|---------------|
| Aguadilla, PR Metro Area | 30.9% | 79.6 |
| San GermÃ¡n, PR Metro Area | 30.2% | 77.9 |
| Miami-Fort Lauderdale-West Palm Beach, FL Metro Area | 30.1% | 77.6 |
| Ponce, PR Metro Area | 30% | 77.3 |
| Aguadilla-Isabela, PR Metro Area | 29% | 74.7 |
| Miami-Fort Lauderdale-Pompano Beach, FL Metro Area | 28.8% | 74.1 |
| Key West-Key Largo, FL Micro Area | 28.2% | 72.8 |
| MayagÃ¼ez, PR Metro Area | 28.2% | 72.7 |
| North Port-Bradenton-Sarasota, FL Metro Area | 28.2% | 72.6 |
| Key West, FL Micro Area | 27.8% | 71.6 |

**Bottom 10 Metros with Lowest Rent Burden (2019+)**
| Metropolitan Area | Avg Rent/Income | Burden Index |
|-------------------|-----------------|---------------|
| Laconia, NH Micro Area | 12.7% | 32.8 |
| Jefferson City, MO Metro Area | 13.5% | 34.9 |
| Manitowoc, WI Micro Area | 14.1% | 36.3 |
| Wausau-Weston, WI Metro Area | 14.1% | 36.3 |
| Cedar Rapids, IA Metro Area | 14.2% | 36.5 |
| Bismarck, ND Metro Area | 14.3% | 36.8 |
| Marinette, WI-MI Micro Area | 14.5% | 37.3 |
| Appleton, WI Metro Area | 14.5% | 37.5 |
| Wooster, OH Micro Area | 14.6% | 37.7 |
| Paducah, KY-IL Metro Area | 14.7% | 37.8 |

**Summary:** 628 metro areas analyzed for relative rent burden since 2019.</code></pre>
</div>
</div>
</section>
</section>
<section id="task-5-housing-growth-analysis" class="level2">
<h2 class="anchored" data-anchor-id="task-5-housing-growth-analysis">TASK 5: Housing Growth Analysis</h2>
<section id="objective-construct-housing-growth-metrics-relative-to-population-and-growth-trends." class="level4">
<h4 class="anchored" data-anchor-id="objective-construct-housing-growth-metrics-relative-to-population-and-growth-trends.">Objective: Construct housing growth metrics relative to population and growth trends.</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join POPULATION and PERMITS tables</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>housing_growth_data <span class="ot">&lt;-</span> POPULATION <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(PERMITS, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Match on CBSA codes</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CBSA_pop =</span> <span class="fu">as.numeric</span>(GEOID)) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CBSA_pop <span class="sc">==</span> CBSA) <span class="sc">%&gt;%</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CBSA, year)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 5-year rolling population growth (starting from 2014)</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>housing_metrics <span class="ot">&lt;-</span> housing_growth_data <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CBSA, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5-year lagged population for growth calculation</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_5yr_ago =</span> <span class="fu">lag</span>(population, <span class="dv">5</span>),</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5-year population growth rate</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_growth_5yr =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(pop_5yr_ago) <span class="sc">&amp;</span> pop_5yr_ago <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>                           (population <span class="sc">-</span> pop_5yr_ago) <span class="sc">/</span> pop_5yr_ago, <span class="cn">NA</span>),</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Instantaneous housing growth: permits per 1000 residents</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">instant_housing_growth =</span> (new_housing_units_permitted <span class="sc">/</span> population) <span class="sc">*</span> <span class="dv">1000</span>,</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rate-based: permits relative to population growth</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">rate_housing_growth =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(pop_growth_5yr) <span class="sc">&amp;</span> pop_growth_5yr <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>                                new_housing_units_permitted <span class="sc">/</span> (population <span class="sc">*</span> pop_growth_5yr),</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>                                <span class="cn">NA</span>)</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2014</span>, <span class="sc">!</span><span class="fu">is.na</span>(instant_housing_growth)) <span class="sc">%&gt;%</span>  <span class="co"># Start from 2014 for 5-yr data</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize metrics (0-100 scale)</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>standardize_metric <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>  x_clean <span class="ot">&lt;-</span> x[<span class="sc">!</span><span class="fu">is.na</span>(x) <span class="sc">&amp;</span> <span class="fu">is.finite</span>(x)]</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(x_clean) <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="fu">return</span>(<span class="fu">rep</span>(<span class="dv">50</span>, <span class="fu">length</span>(x)))</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use 5th to 95th percentile to avoid extreme outliers</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  low_val <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x_clean, <span class="fl">0.05</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>  high_val <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x_clean, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Scale to 0-100</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>  scaled <span class="ot">&lt;-</span> <span class="fu">pmax</span>(<span class="dv">0</span>, <span class="fu">pmin</span>(<span class="dv">100</span>, <span class="dv">100</span> <span class="sc">*</span> (x <span class="sc">-</span> low_val) <span class="sc">/</span> (high_val <span class="sc">-</span> low_val)))</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="cn">NA</span>, scaled)</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>housing_final <span class="ot">&lt;-</span> housing_metrics <span class="sc">%&gt;%</span></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">instant_growth_index =</span> <span class="fu">standardize_metric</span>(instant_housing_growth),</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">rate_growth_index =</span> <span class="fu">standardize_metric</span>(rate_housing_growth),</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Composite score: weighted average (favor rate-based measure)</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">composite_index =</span> <span class="fl">0.3</span> <span class="sc">*</span> instant_growth_index <span class="sc">+</span> <span class="fl">0.7</span> <span class="sc">*</span> rate_growth_index</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(composite_index))</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Housing growth metrics created for"</span>, <span class="fu">length</span>(<span class="fu">unique</span>(housing_final<span class="sc">$</span>CBSA)), <span class="st">"CBSAs</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Housing growth metrics created for 350 CBSAs</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Years covered:"</span>, <span class="fu">paste</span>(<span class="fu">range</span>(housing_final<span class="sc">$</span>year, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">collapse =</span> <span class="st">"-"</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Years covered: 2014-2023 </code></pre>
</div>
</div>
</section>
<section id="highlow-performers-on-individual-metrics" class="level3">
<h3 class="anchored" data-anchor-id="highlow-performers-on-individual-metrics">High/Low Performers on Individual Metrics</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Average metrics over recent period</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>recent_housing <span class="ot">&lt;-</span> housing_final <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CBSA, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_instant =</span> <span class="fu">mean</span>(instant_growth_index, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_rate =</span> <span class="fu">mean</span>(rate_growth_index, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_composite =</span> <span class="fu">mean</span>(composite_index, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_permits_per_1k =</span> <span class="fu">mean</span>(instant_housing_growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(avg_instant), <span class="sc">!</span><span class="fu">is.na</span>(avg_composite))</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">nrow</span>(recent_housing) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No housing growth data available for recent period.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"**TOP INSTANTANEOUS HOUSING GROWTH (2018+)**</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Top performers on instantaneous growth</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  instant_top <span class="ot">&lt;-</span> recent_housing <span class="sc">%&gt;%</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_instant)) <span class="sc">%&gt;%</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">index_formatted =</span> <span class="fu">round</span>(avg_instant, <span class="dv">1</span>),</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">permits_formatted =</span> <span class="fu">round</span>(avg_permits_per_1k, <span class="dv">2</span>)</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"| Metropolitan Area | Permits per 1K Pop | Growth Index |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"|-------------------|-------------------|---------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(instant_top)) {</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|"</span>, instant_top<span class="sc">$</span>NAME[i], <span class="st">"|"</span>, instant_top<span class="sc">$</span>permits_formatted[i], <span class="st">"|"</span>, </span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>        instant_top<span class="sc">$</span>index_formatted[i], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Top performers on rate-based growth</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>  rate_top <span class="ot">&lt;-</span> recent_housing <span class="sc">%&gt;%</span></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(avg_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">index_formatted =</span> <span class="fu">round</span>(avg_rate, <span class="dv">1</span>))</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**TOP RATE-BASED HOUSING GROWTH (2018+)**</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">nrow</span>(rate_top) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"| Metropolitan Area | Rate Growth Index |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|-------------------|-------------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rate_top)) {</span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"|"</span>, rate_top<span class="sc">$</span>NAME[i], <span class="st">"|"</span>, rate_top<span class="sc">$</span>index_formatted[i], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"No rate-based growth data available.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Top composite scores</span></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>  composite_top <span class="ot">&lt;-</span> recent_housing <span class="sc">%&gt;%</span></span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_composite)) <span class="sc">%&gt;%</span></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">composite_formatted =</span> <span class="fu">round</span>(avg_composite, <span class="dv">1</span>))</span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**TOP COMPOSITE HOUSING GROWTH SCORES (2018+)**</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"| Metropolitan Area | Composite Score |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"|-------------------|-----------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(composite_top)) {</span>
<span id="cb35-62"><a href="#cb35-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|"</span>, composite_top<span class="sc">$</span>NAME[i], <span class="st">"|"</span>, composite_top<span class="sc">$</span>composite_formatted[i], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-63"><a href="#cb35-63" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-64"><a href="#cb35-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-65"><a href="#cb35-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**Summary:** Analyzed"</span>, <span class="fu">nrow</span>(recent_housing), <span class="st">"metropolitan areas for housing growth performance.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb35-66"><a href="#cb35-66" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>**TOP INSTANTANEOUS HOUSING GROWTH (2018+)**
| Metropolitan Area | Permits per 1K Pop | Growth Index |
|-------------------|-------------------|---------------|
| Austin-Round Rock, TX Metro Area | 13.85 | 100 |
| Boise City, ID Metro Area | 13.29 | 100 |
| Cape Coral-Fort Myers, FL Metro Area | 14.9 | 100 |
| Coeur d'Alene, ID Metro Area | 12.91 | 100 |
| Daphne-Fairhope-Foley, AL Metro Area | 15.17 | 100 |
| Myrtle Beach-Conway-North Myrtle Beach, SC-NC Metro Area | 19.4 | 100 |
| Naples-Immokalee-Marco Island, FL Metro Area | 11.59 | 100 |
| North Port-Sarasota-Bradenton, FL Metro Area | 15.18 | 100 |
| Punta Gorda, FL Metro Area | 19.56 | 100 |
| Raleigh, NC Metro Area | 11.71 | 100 |

**TOP RATE-BASED HOUSING GROWTH (2018+)**
| Metropolitan Area | Rate Growth Index |
|-------------------|-------------------|
| Casper, WY Metro Area | 100 |
| Evansville, IN-KY Metro Area | 100 |
| Glens Falls, NY Metro Area | 100 |
| Ithaca, NY Metro Area | 100 |
| Memphis, TN-MS-AR Metro Area | 100 |
| Milwaukee-Waukesha-West Allis, WI Metro Area | 100 |
| New Bern, NC Metro Area | 100 |
| New York-Newark-Jersey City, NY-NJ-PA Metro Area | 100 |
| Norwich-New London, CT Metro Area | 100 |
| Ocean City, NJ Metro Area | 100 |

**TOP COMPOSITE HOUSING GROWTH SCORES (2018+)**
| Metropolitan Area | Composite Score |
|-------------------|-----------------|
| Ocean City, NJ Metro Area | 94.6 |
| Santa Rosa, CA Metro Area | 87 |
| Ithaca, NY Metro Area | 85.7 |
| Champaign-Urbana, IL Metro Area | 82.2 |
| New Bern, NC Metro Area | 80.5 |
| Memphis, TN-MS-AR Metro Area | 76.7 |
| Sioux City, IA-NE-SD Metro Area | 75.9 |
| Casper, WY Metro Area | 75.8 |
| St. Louis, MO-IL Metro Area | 75.5 |
| New York-Newark-Jersey City, NY-NJ-PA Metro Area | 75.1 |

**Summary:** Analyzed 338 metropolitan areas for housing growth performance.</code></pre>
</div>
</div>
</section>
</section>
<section id="task-6-visualization-yimby-analysis" class="level2">
<h2 class="anchored" data-anchor-id="task-6-visualization-yimby-analysis">TASK 6: Visualization: YIMBY ANALYSIS</h2>
<section id="linking-rent-burden-and-housing-growth" class="level4">
<h4 class="anchored" data-anchor-id="linking-rent-burden-and-housing-growth">Linking Rent Burden and Housing Growth</h4>
</section>
<section id="section" class="level4">
<h4 class="anchored" data-anchor-id="section"></h4>
<section id="visualization-1" class="level5">
<h5 class="anchored" data-anchor-id="visualization-1">Visualization 1:</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Packages ----</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(dplyr)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(ggplot2)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(viridis)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(plotly)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Basic checks (fail fast with clear messages) ----</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>required_objs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"rent_burden_final"</span>, <span class="st">"housing_final"</span>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> required_objs[<span class="sc">!</span><span class="fu">vapply</span>(required_objs, exists, <span class="fu">logical</span>(<span class="dv">1</span>))]</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(missing)) {</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sprintf</span>(<span class="st">"Missing object(s): %s</span><span class="sc">\n</span><span class="st">Please load/compute these before this chunk."</span>,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(missing, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Build combined data ----</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>yimby_data <span class="ot">&lt;-</span> rent_burden_final <span class="sc">%&gt;%</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(GEOID, NAME, year, rent_burden_index) <span class="sc">%&gt;%</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">CBSA_num =</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(GEOID))) <span class="sc">%&gt;%</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    housing_final <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(CBSA, NAME, year, composite_index, pop_growth_5yr),</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"CBSA_num"</span> <span class="ot">=</span> <span class="st">"CBSA"</span>, <span class="st">"NAME"</span>, <span class="st">"year"</span>)</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rent_burden_index), <span class="sc">!</span><span class="fu">is.na</span>(composite_index))</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(yimby_data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"No rows after joining inputs. Check keys (GEOID/CBSA, NAME, year) and NA filtering."</span>)</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Compute indicators ----</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>yimby_analysis <span class="ot">&lt;-</span> yimby_data <span class="sc">%&gt;%</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(CBSA_num, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(year, <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">early_rent_burden  =</span> <span class="fu">mean</span>(rent_burden_index[year <span class="sc">&lt;=</span> <span class="dv">2016</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">recent_rent_burden =</span> <span class="fu">mean</span>(rent_burden_index[year <span class="sc">&gt;=</span> <span class="dv">2020</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_burden_change =</span> recent_rent_burden <span class="sc">-</span> early_rent_burden,</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_housing_growth =</span> <span class="fu">mean</span>(composite_index, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_pop_growth     =</span> <span class="fu">mean</span>(pop_growth_5yr, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(early_rent_burden), <span class="sc">!</span><span class="fu">is.na</span>(avg_housing_growth)) <span class="sc">%&gt;%</span></span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_early_burden   =</span> early_rent_burden  <span class="sc">&gt;</span> <span class="fu">median</span>(early_rent_burden,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">decreasing_burden   =</span> rent_burden_change <span class="sc">&lt;</span> <span class="dv">0</span>,</span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">positive_pop_growth =</span> avg_pop_growth     <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_housing_growth =</span> avg_housing_growth <span class="sc">&gt;</span> <span class="fu">median</span>(avg_housing_growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">yimby_score =</span> <span class="fu">as.numeric</span>(high_early_burden) <span class="sc">+</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.numeric</span>(decreasing_burden) <span class="sc">+</span></span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.numeric</span>(positive_pop_growth) <span class="sc">+</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.numeric</span>(high_housing_growth)</span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(yimby_analysis) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"`yimby_analysis` is empty after summarization. Check upstream filters/medians."</span>)</span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Pick highlight metros (may be empty; that's OK) ----</span></span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a>highlight_metros <span class="ot">&lt;-</span> yimby_analysis <span class="sc">%&gt;%</span></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(yimby_score <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_max</span>(avg_pop_growth, <span class="at">n =</span> <span class="dv">8</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Build ggplot (no static labels; hover only) ----</span></span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>x_med <span class="ot">&lt;-</span> <span class="fu">median</span>(yimby_analysis<span class="sc">$</span>avg_housing_growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>viz1_clean <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>  yimby_analysis,</span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> avg_housing_growth,</span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> rent_burden_change,</span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> yimby_score,</span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">size  =</span> <span class="fu">pmax</span>(<span class="dv">0</span>, <span class="fu">abs</span>(avg_pop_growth)),     <span class="co"># non-negative for point size</span></span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">text  =</span> <span class="fu">sprintf</span>(</span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;Avg housing growth: %.2f&lt;br&gt;Rent burden change: %.2f&lt;br&gt;YIMBY score: %d&lt;br&gt;Pop growth (5yr avg): %.3f"</span>,</span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a>      NAME, avg_housing_growth, rent_burden_change, yimby_score, avg_pop_growth</span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> x_med, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="dv">0</span>,</span>
<span id="cb37-83"><a href="#cb37-83" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.07</span>, <span class="at">fill =</span> <span class="st">"#8BC34A"</span>) <span class="sc">+</span></span>
<span id="cb37-84"><a href="#cb37-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> x_med <span class="sc">+</span> <span class="fu">diff</span>(<span class="fu">range</span>(yimby_analysis<span class="sc">$</span>avg_housing_growth, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">*</span><span class="fl">0.05</span>,</span>
<span id="cb37-85"><a href="#cb37-85" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="fu">quantile</span>(yimby_analysis<span class="sc">$</span>rent_burden_change, <span class="fl">0.1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-86"><a href="#cb37-86" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"YIMBY Zone:</span><span class="sc">\n</span><span class="st">High Growth â†“ Burden"</span>,</span>
<span id="cb37-87"><a href="#cb37-87" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"#33691E"</span>) <span class="sc">+</span></span>
<span id="cb37-88"><a href="#cb37-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray55"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb37-89"><a href="#cb37-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> x_med, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray55"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb37-90"><a href="#cb37-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.85</span>) <span class="sc">+</span></span>
<span id="cb37-91"><a href="#cb37-91" aria-hidden="true" tabindex="-1"></a>  <span class="co"># subtle emphasis for highlighted metros (no labels)</span></span>
<span id="cb37-92"><a href="#cb37-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> highlight_metros, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-93"><a href="#cb37-93" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> avg_housing_growth, <span class="at">y =</span> rent_burden_change),</span>
<span id="cb37-94"><a href="#cb37-94" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#F44336"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">alpha =</span> <span class="fl">0.65</span>) <span class="sc">+</span></span>
<span id="cb37-95"><a href="#cb37-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(</span>
<span id="cb37-96"><a href="#cb37-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"YIMBY Score</span><span class="sc">\n</span><span class="st">(out of 4)"</span>, <span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb37-97"><a href="#cb37-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="at">breaks =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb37-98"><a href="#cb37-98" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-99"><a href="#cb37-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">name =</span> <span class="st">"Population Growth (5yr Avg)"</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb37-100"><a href="#cb37-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-101"><a href="#cb37-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"YIMBY Success: Housing Growth vs. Rent Burden Change"</span>,</span>
<span id="cb37-102"><a href="#cb37-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Metros in the green quadrant show higher housing growth and declining rent burden (2014â€“2023)"</span>,</span>
<span id="cb37-103"><a href="#cb37-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Average Housing Growth Index"</span>,</span>
<span id="cb37-104"><a href="#cb37-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Change in Rent Burden Index (Recent â€“ Early)"</span>,</span>
<span id="cb37-105"><a href="#cb37-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: ACS, HUD &amp; Building Permits Data"</span></span>
<span id="cb37-106"><a href="#cb37-106" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-107"><a href="#cb37-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb37-108"><a href="#cb37-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb37-109"><a href="#cb37-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title    =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#212121"</span>),</span>
<span id="cb37-110"><a href="#cb37-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">"#424242"</span>),</span>
<span id="cb37-111"><a href="#cb37-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb37-112"><a href="#cb37-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb37-113"><a href="#cb37-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box =</span> <span class="st">"vertical"</span>,</span>
<span id="cb37-114"><a href="#cb37-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb37-115"><a href="#cb37-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text  =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb37-116"><a href="#cb37-116" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-117"><a href="#cb37-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-118"><a href="#cb37-118" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Convert to interactive (hover-only labels) ----</span></span>
<span id="cb37-119"><a href="#cb37-119" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(viz1_clean, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="fig-yimby" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-yimby-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e436c308aff4f190f033" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e436c308aff4f190f033">{"x":{"data":[{"x":[27.955872149232516,27.955872149232516,null,null,27.955872149232516],"y":[null,0,0,null,null],"text":"","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(139,195,74,0.07)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[31.476816569338624],"y":[-4.4838597801864388],"text":"YIMBY Zone:<br />High Growth â†“ Burden","hovertext":"","textfont":{"size":13.228346456692915,"color":"rgba(51,105,30,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-3.068540612313285,74.39223663002106],"y":[0,0],"text":"","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(140,140,140,0.6)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[27.955872149232516,27.955872149232516],"y":[-11.310889599128537,10.102853221154234],"text":"","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(140,140,140,0.6)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[15.310332926379449,60.707699840701139,39.551958931804343,33.214587788760873,70.871292209914955,14.331438721742929,16.139286072328318,19.465429298183025,31.885990402123589,14.436755847989065,22.147201349166345,31.96273403352729,27.629714506286568,34.558708887679273,30.043832250435045,27.767063539947426,34.709138092763759,29.188441824582689,17.571921078094739,26.685330195193838,27.423390767203173,35.564919531726105,38.31827160832804,28.316629992871636,14.546751411082152,34.660516297661793,27.955872149232516,18.076518592979344,18.063584600826644,50.999430885713963,23.396732136158388,39.683193702004587,31.599168610064552,36.839003800404406,30.900388007072323,21.477548945855279,40.861519582683215,22.261239362487515,28.504002065180185,34.723674379054749,20.072728804678444,37.328275894991236,30.926013467395844,40.243794512273496,28.907516627822897,31.973554607653803,41.959756150396352,33.457935292215033,14.879405058471878,14.593845746000984,17.716390145497311,24.988032798617699,15.325677444210118,35.943019983950734,7.9613714616557685,32.33666812518296,29.394197643213843,51.547391994167079,8.2438889508499678,51.950072762168901,23.502867205345453,31.628980629804257,38.472163169682034,34.049114147360612,29.145668041952188,25.541338756340043,33.005559477520883,33.763385490050524,10.361724518694883,17.314731812866032,28.115515315846348,2.9412053980343051,35.68981090638394,22.835478683104437,30.583822842525169,33.040238190932087,41.473504526416235,30.932000098655092,35.061288970153271,23.130125449916765,14.115907622707638,22.707613531526587,34.239780953721294,36.585628361771839,38.218796812683358,35.77725682649767,10.659922995177503,40.084904242396696,38.660085539301761,21.792025112374063,21.342541433785765,42.978720797303083,17.021481892274597,22.020869343431091,9.7282376593342406,7.2215840365552939,8.2750457927939678,0.45240380779282191,31.466075702127387,27.547061264241457,34.362921966161935,39.243508171675757,23.258989113202919,5.0546262841249048,35.612082221443423,25.346710344968045,29.012057920998068,43.749035308425462,34.591789894622543,43.758674665834739,13.812291799517794,32.988891690768853,7.1086420205292429,25.264597495209802,22.401122122701601,41.799008381912174,33.290643144658958,29.952738629766372,14.563495851110989,9.7011331416583761,25.409445753023061,42.45831627065639,45.655050122027255,9.2983896204346479,13.425834434296126,14.44194626711325,35.214008066562933,30.062006179875205,10.60545366493921,35.367632618166468,24.017142378283108,31.352729154758045,10.827628471239175,24.533675941125995,34.801007303391884,29.055990150380545,12.198360826537623,29.797052568060778,20.272223203890757,37.449942123280849,28.092539969570087,27.643147276657874,45.440031935200366,8.1637984411130802,28.53564171468896,19.839307543288495,49.770501951890779,25.08013308302862,37.83641408101456,39.77059910322307,7.0279134163793877,28.93169405736359,16.631841784905966,1.2928528712670586,23.602507569012182,5.2358686098467597,6.0370264161556619,41.104029664544655,19.875350158567812,44.253027632948388,30.24837384537647,29.165940704756693,20.886843475009709,19.670363984832132,24.036930420175459,34.510743416879599,46.518700018360612,27.153756839435204,13.161926522458465,24.725889117057562,25.32282197084136,9.5481855613476654,27.93314580423694,58.850885562734106,29.195958539192993,28.412807766537171,38.713970812396873,40.439456087481844,13.711581157622435,36.175873864905491,35.762411448117781,10.820092878674485,44.901848034776776,50.732945095909876,15.710521675715368,33.981331713620428,27.8109993750036,32.553360785527538,11.169375947527486,28.633296854316249,25.415297769194169,41.447878625494347,35.685974648386122,20.52580869234016,14.458062618213733,38.95281474529186,20.230399802928616,21.847236986016593,19.334136107688348,12.499343367778774,21.658426199290712,28.174254510069307,27.185809981832545,28.589655188208486,49.121517854582272,27.944978236735189,7.642200636531653,20.244421321259086,42.582715160803986,35.672939822101512,29.533707443442125,34.197566566600464,22.051988871478866,12.034151467369846,9.56228121350353,11.332860964114499,46.258700979719777,26.243501050261546,17.494584192390786,29.754989386682279,24.722996636308203,23.060267997283386,16.829892018432083,9.901011435128737,7.9437500038316751,57.234886602002334,7.7348998016556401,26.628960100819384,17.078020733120251,18.62299876953967,33.163765756752845,22.577115839246563,45.597312036125018,43.413991720000091,13.360288966325763,45.577556334808939,35.622670738361187,30.038127379065585,26.456984066620301,23.134795484182892,16.268790251335972,14.645371089120802,37.103542505339512],"y":[2.0563571080674734,null,0.52038088187600096,-0.85045852460673643,null,1.132545513655451,1.3794441254857688,-10.337537652752047,-1.5956684396341672,2.3768413588025723,0.66321477556164155,0.41488014438673559,-4.7326122561330237,-3.764048338692497,-3.8684564385200915,-1.1913582635261903,-2.6954914446135589,3.4135562302135511,null,5.7777364738493731,-4.048843632925049,-2.5039382471122096,null,-0.72632259074478611,null,5.6962236378290001,-0.59133483025761535,null,1.3658837795833136,-6.3156895127425656,null,-7.3096941751766735,-0.61249599468985849,8.8093752512767693,-0.98159445528709455,0.9316649757264841,null,null,0.74819318181452132,0.80307916868158458,null,-0.27497653722955562,-4.8324889116863048,4.5331339647332527,0.10834658857844204,6.5449394447815621,-0.65901625555333965,0.92008240533618135,-4.2360071644733068,-2.5267119653834271,2.4288619064587849,null,3.4277115053593761,5.0383541594119592,null,5.8589176939912022,-3.9784712774494011,null,-4.3479288477061502,null,-1.839293800505672,0.73232896715858686,-4.5178425133065119,-1.5667617918159706,-1.0985836337161246,-1.5832189458496231,0.2884431959647813,-5.1789183514699317,null,4.1182151397083402,1.2813321881923869,null,-1.2016868482376069,-3.7719326131203488,null,5.0392382556419264,null,-4.5485363241744707,0.54665544817397915,1.5524997406623129,-1.8076974506528956,5.9962352753534134,1.3054327166196131,null,-5.2529286394042316,-2.569206321464641,null,-3.3891436429614146,4.8409743949213819,-0.23390302010500363,-0.70734945354734435,-0.79595637991480572,0.028407594844082951,-3.1933726076386151,null,-1.9245138542245002,-2.8702889437152947,-5.2135212841730407,1.4433551602129313,1.677341286201063,-2.7271957966099762,2.4046487842034878,0.37373780243986943,-4.9591046980544533,1.7620124929644234,-5.8989207514254218,-0.72025896454756833,-4.1420756254435886,-3.9524614890207985,-1.4578952668534271,null,1.976658730866923,null,-0.10811042296405304,null,-1.0484904409449172,0.66344551418993092,0.24570295194737923,-0.42545831879521501,-1.9034176059066397,null,-7.7759566889163949,-2.5273729594282131,2.3279073075697099,-1.1083277942296732,0.76849655518095261,1.0431294230979944,1.7276730932784687,null,1.2071686467459912,-1.4025177376309799,4.4983913411980652,-1.3383314409409195,-3.4450090512521285,1.6537908988675767,-3.8773394461311099,null,3.0290454231505208,2.5482594718076896,null,-4.1279260981070465,-3.6097570721118544,null,3.1472911915238555,-3.9064382934888116,-4.5319689283640656,null,3.1699360826736722,-5.617417827818926,-1.382531722220989,-0.90016914272379012,1.7795556767178198,-1.4730388284984528,-7.2016746135776515,1.8729944155990594,null,null,4.8581480398515922,-3.6927398313136663,-2.5434784601221736,1.7714195712137411,1.9078928132350157,3.1011989209923101,1.6921175201407266,-0.88403961992512592,4.226627469288772,-1.6613618245384671,-5.1827709336458625,null,0.61901522337362991,-1.2950170079739749,1.8198779617362888,-0.35521062197418729,-1.1769993623966002,1.7942402034970186,-0.26376433989146619,null,0.60418542639826711,-4.5874370029680662,-0.75048605431615556,-0.7962690307887712,0.45283416818241307,-8.3333014805138816,0.26260961140680905,-1.4449546413785939,-1.2500405380869353,4.7089241854813153,-1.4685071501496054,null,-0.071386140311254564,0.44742515922325765,9.1295012747777449,null,7.0232017488175558,1.3543581623060987,3.0422743593546926,0.33202442969452761,2.7775012688913563,null,null,-1.6352559806974156,0.72026014761091517,1.9312815966655421,0.53942378970615579,2.2876497920776444,8.3361479790815167,null,null,-0.76107569051948332,2.2331916982057081,0.77798529491130353,null,-2.9988204255965485,null,-2.1782226560244382,null,-2.0102414062646048,5.1460435831345919,0.63942211891382073,null,-0.68304423056644481,1.0859691032783871,-2.7017604392738903,-2.3023208079145903,null,-0.96818649706893467,null,-1.6277948191814104,null,0.26584320149451912,-4.0957153274045197,-1.9563869038731383,null,1.2580661585123494,null,-0.92835521681941202,null,-0.40028471209840433,-1.8582994346220687,-2.7730105748490885,-2.1494097017611224,1.6803310534523703,-8.0950373867485439],"text":["<b>Abilene, TX Metro Area<\/b><br>Avg housing growth: 15.31<br>Rent burden change: 2.06<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.039","<b>Akron, OH Metro Area<\/b><br>Avg housing growth: 60.71<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.003","<b>Albany-Schenectady-Troy, NY Metro Area<\/b><br>Avg housing growth: 39.55<br>Rent burden change: 0.52<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.015","<b>Albuquerque, NM Metro Area<\/b><br>Avg housing growth: 33.21<br>Rent burden change: -0.85<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.019","<b>Alexandria, LA Metro Area<\/b><br>Avg housing growth: 70.87<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.003","<b>Allentown-Bethlehem-Easton, PA-NJ Metro Area<\/b><br>Avg housing growth: 14.33<br>Rent burden change: 1.13<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.024","<b>Amarillo, TX Metro Area<\/b><br>Avg housing growth: 16.14<br>Rent burden change: 1.38<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.038","<b>Ames, IA Metro Area<\/b><br>Avg housing growth: 19.47<br>Rent burden change: -10.34<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.175","<b>Anchorage, AK Metro Area<\/b><br>Avg housing growth: 31.89<br>Rent burden change: -1.60<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.030","<b>Ann Arbor, MI Metro Area<\/b><br>Avg housing growth: 14.44<br>Rent burden change: 2.38<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.034","<b>Appleton, WI Metro Area<\/b><br>Avg housing growth: 22.15<br>Rent burden change: 0.66<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.037","<b>Asheville, NC Metro Area<\/b><br>Avg housing growth: 31.96<br>Rent burden change: 0.41<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.056","<b>Athens-Clarke County, GA Metro Area<\/b><br>Avg housing growth: 27.63<br>Rent burden change: -4.73<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.063","<b>Atlantic City-Hammonton, NJ Metro Area<\/b><br>Avg housing growth: 34.56<br>Rent burden change: -3.76<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.101","<b>Auburn-Opelika, AL Metro Area<\/b><br>Avg housing growth: 30.04<br>Rent burden change: -3.87<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.125","<b>Augusta-Richmond County, GA-SC Metro Area<\/b><br>Avg housing growth: 27.77<br>Rent burden change: -1.19<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.053","<b>Bangor, ME Metro Area<\/b><br>Avg housing growth: 34.71<br>Rent burden change: -2.70<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.015","<b>Baton Rouge, LA Metro Area<\/b><br>Avg housing growth: 29.19<br>Rent burden change: 3.41<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.037","<b>Beaumont-Port Arthur, TX Metro Area<\/b><br>Avg housing growth: 17.57<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.047","<b>Bellingham, WA Metro Area<\/b><br>Avg housing growth: 26.69<br>Rent burden change: 5.78<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.069","<b>Billings, MT Metro Area<\/b><br>Avg housing growth: 27.42<br>Rent burden change: -4.05<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.084","<b>Binghamton, NY Metro Area<\/b><br>Avg housing growth: 35.56<br>Rent burden change: -2.50<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.007","<b>Birmingham-Hoover, AL Metro Area<\/b><br>Avg housing growth: 38.32<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.012","<b>Bismarck, ND Metro Area<\/b><br>Avg housing growth: 28.32<br>Rent burden change: -0.73<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.099","<b>Blacksburg-Christiansburg-Radford, VA Metro Area<\/b><br>Avg housing growth: 14.55<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.096","<b>Boulder, CO Metro Area<\/b><br>Avg housing growth: 34.66<br>Rent burden change: 5.70<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.045","<b>Bowling Green, KY Metro Area<\/b><br>Avg housing growth: 27.96<br>Rent burden change: -0.59<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.203","<b>Bremerton-Silverdale, WA Metro Area<\/b><br>Avg housing growth: 18.08<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.047","<b>Bridgeport-Stamford-Norwalk, CT Metro Area<\/b><br>Avg housing growth: 18.06<br>Rent burden change: 1.37<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.022","<b>Brownsville-Harlingen, TX Metro Area<\/b><br>Avg housing growth: 51.00<br>Rent burden change: -6.32<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.019","<b>Brunswick, GA Metro Area<\/b><br>Avg housing growth: 23.40<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.059","<b>Burlington, NC Metro Area<\/b><br>Avg housing growth: 39.68<br>Rent burden change: -7.31<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.072","<b>Burlington-South Burlington, VT Metro Area<\/b><br>Avg housing growth: 31.60<br>Rent burden change: -0.61<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.032","<b>Cape Coral-Fort Myers, FL Metro Area<\/b><br>Avg housing growth: 36.84<br>Rent burden change: 8.81<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.138","<b>Casper, WY Metro Area<\/b><br>Avg housing growth: 30.90<br>Rent burden change: -0.98<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.052","<b>Cedar Rapids, IA Metro Area<\/b><br>Avg housing growth: 21.48<br>Rent burden change: 0.93<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.031","<b>Champaign-Urbana, IL Metro Area<\/b><br>Avg housing growth: 40.86<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.033","<b>Charlottesville, VA Metro Area<\/b><br>Avg housing growth: 22.26<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.118","<b>Chattanooga, TN-GA Metro Area<\/b><br>Avg housing growth: 28.50<br>Rent burden change: 0.75<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.038","<b>Cheyenne, WY Metro Area<\/b><br>Avg housing growth: 34.72<br>Rent burden change: 0.80<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.044","<b>Chico, CA Metro Area<\/b><br>Avg housing growth: 20.07<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.029","<b>Clarksville, TN-KY Metro Area<\/b><br>Avg housing growth: 37.33<br>Rent burden change: -0.27<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.101","<b>Cleveland, TN Metro Area<\/b><br>Avg housing growth: 30.93<br>Rent burden change: -4.83<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.048","<b>Coeur d'Alene, ID Metro Area<\/b><br>Avg housing growth: 40.24<br>Rent burden change: 4.53<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.127","<b>College Station-Bryan, TX Metro Area<\/b><br>Avg housing growth: 28.91<br>Rent burden change: 0.11<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.103","<b>Colorado Springs, CO Metro Area<\/b><br>Avg housing growth: 31.97<br>Rent burden change: 6.54<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.082","<b>Columbia, MO Metro Area<\/b><br>Avg housing growth: 41.96<br>Rent burden change: -0.66<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.107","<b>Columbia, SC Metro Area<\/b><br>Avg housing growth: 33.46<br>Rent burden change: 0.92<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.048","<b>Columbus, GA-AL Metro Area<\/b><br>Avg housing growth: 14.88<br>Rent burden change: -4.24<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.056","<b>Columbus, IN Metro Area<\/b><br>Avg housing growth: 14.59<br>Rent burden change: -2.53<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.038","<b>Columbus, OH Metro Area<\/b><br>Avg housing growth: 17.72<br>Rent burden change: 2.43<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.080","<b>Corpus Christi, TX Metro Area<\/b><br>Avg housing growth: 24.99<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.044","<b>Corvallis, OR Metro Area<\/b><br>Avg housing growth: 15.33<br>Rent burden change: 3.43<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.063","<b>Crestview-Fort Walton Beach-Destin, FL Metro Area<\/b><br>Avg housing growth: 35.94<br>Rent burden change: 5.04<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.238","<b>Cumberland, MD-WV Metro Area<\/b><br>Avg housing growth: 7.96<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.008","<b>Dallas-Fort Worth-Arlington, TX Metro Area<\/b><br>Avg housing growth: 32.34<br>Rent burden change: 5.86<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.099","<b>Dalton, GA Metro Area<\/b><br>Avg housing growth: 29.39<br>Rent burden change: -3.98<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.017","<b>Davenport-Moline-Rock Island, IA-IL Metro Area<\/b><br>Avg housing growth: 51.55<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.005","<b>Decatur, AL Metro Area<\/b><br>Avg housing growth: 8.24<br>Rent burden change: -4.35<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.029","<b>Decatur, IL Metro Area<\/b><br>Avg housing growth: 51.95<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.001","<b>Deltona-Daytona Beach-Ormond Beach, FL Metro Area<\/b><br>Avg housing growth: 23.50<br>Rent burden change: -1.84<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.178","<b>Des Moines-West Des Moines, IA Metro Area<\/b><br>Avg housing growth: 31.63<br>Rent burden change: 0.73<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.117","<b>Dothan, AL Metro Area<\/b><br>Avg housing growth: 38.47<br>Rent burden change: -4.52<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.019","<b>Dover, DE Metro Area<\/b><br>Avg housing growth: 34.05<br>Rent burden change: -1.57<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.064","<b>Dubuque, IA Metro Area<\/b><br>Avg housing growth: 29.15<br>Rent burden change: -1.10<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.021","<b>Duluth, MN-WI Metro Area<\/b><br>Avg housing growth: 25.54<br>Rent burden change: -1.58<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.029","<b>Durham-Chapel Hill, NC Metro Area<\/b><br>Avg housing growth: 33.01<br>Rent burden change: 0.29<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.118","<b>Eau Claire, WI Metro Area<\/b><br>Avg housing growth: 33.76<br>Rent burden change: -5.18<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.032","<b>El Centro, CA Metro Area<\/b><br>Avg housing growth: 10.36<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.033","<b>Elkhart-Goshen, IN Metro Area<\/b><br>Avg housing growth: 17.31<br>Rent burden change: 4.12<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.019","<b>El Paso, TX Metro Area<\/b><br>Avg housing growth: 28.12<br>Rent burden change: 1.28<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.037","<b>Fairbanks, AK Metro Area<\/b><br>Avg housing growth: 2.94<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.012","<b>Fargo, ND-MN Metro Area<\/b><br>Avg housing growth: 35.69<br>Rent burden change: -1.20<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.103","<b>Fayetteville, NC Metro Area<\/b><br>Avg housing growth: 22.84<br>Rent burden change: -3.77<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.149","<b>Fayetteville-Springdale-Rogers, AR-MO Metro Area<\/b><br>Avg housing growth: 30.58<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.109","<b>Flagstaff, AZ Metro Area<\/b><br>Avg housing growth: 33.04<br>Rent burden change: 5.04<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.040","<b>Florence, SC Metro Area<\/b><br>Avg housing growth: 41.47<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.018","<b>Florence-Muscle Shoals, AL Metro Area<\/b><br>Avg housing growth: 30.93<br>Rent burden change: -4.55<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.027","<b>Fond du Lac, WI Metro Area<\/b><br>Avg housing growth: 35.06<br>Rent burden change: 0.55<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.012","<b>Fort Wayne, IN Metro Area<\/b><br>Avg housing growth: 23.13<br>Rent burden change: 1.55<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.035","<b>Fresno, CA Metro Area<\/b><br>Avg housing growth: 14.12<br>Rent burden change: -1.81<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.059","<b>Gainesville, FL Metro Area<\/b><br>Avg housing growth: 22.71<br>Rent burden change: 6.00<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.133","<b>Gainesville, GA Metro Area<\/b><br>Avg housing growth: 34.24<br>Rent burden change: 1.31<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.070","<b>Goldsboro, NC Metro Area<\/b><br>Avg housing growth: 36.59<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.036","<b>Grand Forks, ND-MN Metro Area<\/b><br>Avg housing growth: 38.22<br>Rent burden change: -5.25<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.025","<b>Grand Junction, CO Metro Area<\/b><br>Avg housing growth: 35.78<br>Rent burden change: -2.57<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.036","<b>Grand Rapids-Wyoming, MI Metro Area<\/b><br>Avg housing growth: 10.66<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.281","<b>Great Falls, MT Metro Area<\/b><br>Avg housing growth: 40.08<br>Rent burden change: -3.39<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.023","<b>Greeley, CO Metro Area<\/b><br>Avg housing growth: 38.66<br>Rent burden change: 4.84<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.156","<b>Green Bay, WI Metro Area<\/b><br>Avg housing growth: 21.79<br>Rent burden change: -0.23<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.033","<b>Greensboro-High Point, NC Metro Area<\/b><br>Avg housing growth: 21.34<br>Rent burden change: -0.71<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.037","<b>Hanford-Corcoran, CA Metro Area<\/b><br>Avg housing growth: 42.98<br>Rent burden change: -0.80<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.014","<b>Harrisburg-Carlisle, PA Metro Area<\/b><br>Avg housing growth: 17.02<br>Rent burden change: 0.03<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.041","<b>Harrisonburg, VA Metro Area<\/b><br>Avg housing growth: 22.02<br>Rent burden change: -3.19<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.044","<b>Hartford-West Hartford-East Hartford, CT Metro Area<\/b><br>Avg housing growth: 9.73<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.015","<b>Hattiesburg, MS Metro Area<\/b><br>Avg housing growth: 7.22<br>Rent burden change: -1.92<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.073","<b>Hot Springs, AR Metro Area<\/b><br>Avg housing growth: 8.28<br>Rent burden change: -2.87<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.018","<b>Huntington-Ashland, WV-KY-OH Metro Area<\/b><br>Avg housing growth: 0.45<br>Rent burden change: -5.21<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.211","<b>Huntsville, AL Metro Area<\/b><br>Avg housing growth: 31.47<br>Rent burden change: 1.44<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.092","<b>Idaho Falls, ID Metro Area<\/b><br>Avg housing growth: 27.55<br>Rent burden change: 1.68<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.108","<b>Iowa City, IA Metro Area<\/b><br>Avg housing growth: 34.36<br>Rent burden change: -2.73<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.072","<b>Ithaca, NY Metro Area<\/b><br>Avg housing growth: 39.24<br>Rent burden change: 2.40<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.023","<b>Jackson, MS Metro Area<\/b><br>Avg housing growth: 23.26<br>Rent burden change: 0.37<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.040","<b>Jackson, TN Metro Area<\/b><br>Avg housing growth: 5.05<br>Rent burden change: -4.96<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.260","<b>Jacksonville, FL Metro Area<\/b><br>Avg housing growth: 35.61<br>Rent burden change: 1.76<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.103","<b>Jacksonville, NC Metro Area<\/b><br>Avg housing growth: 25.35<br>Rent burden change: -5.90<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.073","<b>Jefferson City, MO Metro Area<\/b><br>Avg housing growth: 29.01<br>Rent burden change: -0.72<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.012","<b>Johnson City, TN Metro Area<\/b><br>Avg housing growth: 43.75<br>Rent burden change: -4.14<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.022","<b>Jonesboro, AR Metro Area<\/b><br>Avg housing growth: 34.59<br>Rent burden change: -3.95<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.055","<b>Joplin, MO Metro Area<\/b><br>Avg housing growth: 43.76<br>Rent burden change: -1.46<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.019","<b>Kalamazoo-Portage, MI Metro Area<\/b><br>Avg housing growth: 13.81<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.025","<b>Kansas City, MO-KS Metro Area<\/b><br>Avg housing growth: 32.99<br>Rent burden change: 1.98<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.035","<b>Kingsport-Bristol-Bristol, TN-VA Metro Area<\/b><br>Avg housing growth: 7.11<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.019","<b>Knoxville, TN Metro Area<\/b><br>Avg housing growth: 25.26<br>Rent burden change: -0.11<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.126","<b>Lafayette, LA Metro Area<\/b><br>Avg housing growth: 22.40<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.532","<b>Lake Charles, LA Metro Area<\/b><br>Avg housing growth: 41.80<br>Rent burden change: -1.05<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.049","<b>Lake Havasu City-Kingman, AZ Metro Area<\/b><br>Avg housing growth: 33.29<br>Rent burden change: 0.66<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.044","<b>Lakeland-Winter Haven, FL Metro Area<\/b><br>Avg housing growth: 29.95<br>Rent burden change: 0.25<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.132","<b>Lancaster, PA Metro Area<\/b><br>Avg housing growth: 14.56<br>Rent burden change: -0.43<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.032","<b>Lansing-East Lansing, MI Metro Area<\/b><br>Avg housing growth: 9.70<br>Rent burden change: -1.90<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.073","<b>Laredo, TX Metro Area<\/b><br>Avg housing growth: 25.41<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.064","<b>Las Cruces, NM Metro Area<\/b><br>Avg housing growth: 42.46<br>Rent burden change: -7.78<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.025","<b>Lawrence, KS Metro Area<\/b><br>Avg housing growth: 45.66<br>Rent burden change: -2.53<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.041","<b>Lawton, OK Metro Area<\/b><br>Avg housing growth: 9.30<br>Rent burden change: 2.33<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.046","<b>Lebanon, PA Metro Area<\/b><br>Avg housing growth: 13.43<br>Rent burden change: -1.11<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.037","<b>Lewiston, ID-WA Metro Area<\/b><br>Avg housing growth: 14.44<br>Rent burden change: 0.77<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.029","<b>Lewiston-Auburn, ME Metro Area<\/b><br>Avg housing growth: 35.21<br>Rent burden change: 1.04<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.023","<b>Lexington-Fayette, KY Metro Area<\/b><br>Avg housing growth: 30.06<br>Rent burden change: 1.73<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.044","<b>Lima, OH Metro Area<\/b><br>Avg housing growth: 10.61<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.007","<b>Lincoln, NE Metro Area<\/b><br>Avg housing growth: 35.37<br>Rent burden change: 1.21<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.058","<b>Little Rock-North Little Rock-Conway, AR Metro Area<\/b><br>Avg housing growth: 24.02<br>Rent burden change: -1.40<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.035","<b>Logan, UT-ID Metro Area<\/b><br>Avg housing growth: 31.35<br>Rent burden change: 4.50<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.095","<b>Longview, TX Metro Area<\/b><br>Avg housing growth: 10.83<br>Rent burden change: -1.34<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.157","<b>Longview, WA Metro Area<\/b><br>Avg housing growth: 24.53<br>Rent burden change: -3.45<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.048","<b>Lubbock, TX Metro Area<\/b><br>Avg housing growth: 34.80<br>Rent burden change: 1.65<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.076","<b>Lynchburg, VA Metro Area<\/b><br>Avg housing growth: 29.06<br>Rent burden change: -3.88<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.025","<b>Macon, GA Metro Area<\/b><br>Avg housing growth: 12.20<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.013","<b>Madison, WI Metro Area<\/b><br>Avg housing growth: 29.80<br>Rent burden change: 3.03<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.086","<b>Manchester-Nashua, NH Metro Area<\/b><br>Avg housing growth: 20.27<br>Rent burden change: 2.55<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.029","<b>Mankato-North Mankato, MN Metro Area<\/b><br>Avg housing growth: 37.45<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.034","<b>McAllen-Edinburg-Mission, TX Metro Area<\/b><br>Avg housing growth: 28.09<br>Rent burden change: -4.13<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.064","<b>Medford, OR Metro Area<\/b><br>Avg housing growth: 27.64<br>Rent burden change: -3.61<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.044","<b>Memphis, TN-MS-AR Metro Area<\/b><br>Avg housing growth: 45.44<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.014","<b>Merced, CA Metro Area<\/b><br>Avg housing growth: 8.16<br>Rent burden change: 3.15<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.056","<b>Michigan City-La Porte, IN Metro Area<\/b><br>Avg housing growth: 28.54<br>Rent burden change: -3.91<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.012","<b>Midland, TX Metro Area<\/b><br>Avg housing growth: 19.84<br>Rent burden change: -4.53<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.135","<b>Milwaukee-Waukesha-West Allis, WI Metro Area<\/b><br>Avg housing growth: 49.77<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.007","<b>Minneapolis-St. Paul-Bloomington, MN-WI Metro Area<\/b><br>Avg housing growth: 25.08<br>Rent burden change: 3.17<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.055","<b>Missoula, MT Metro Area<\/b><br>Avg housing growth: 37.84<br>Rent burden change: -5.62<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.053","<b>Mobile, AL Metro Area<\/b><br>Avg housing growth: 39.77<br>Rent burden change: -1.38<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.017","<b>Modesto, CA Metro Area<\/b><br>Avg housing growth: 7.03<br>Rent burden change: -0.90<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.035","<b>Monroe, LA Metro Area<\/b><br>Avg housing growth: 28.93<br>Rent burden change: 1.78<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.087","<b>Montgomery, AL Metro Area<\/b><br>Avg housing growth: 16.63<br>Rent burden change: -1.47<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.028","<b>Morgantown, WV Metro Area<\/b><br>Avg housing growth: 1.29<br>Rent burden change: -7.20<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.043","<b>Mount Vernon-Anacortes, WA Metro Area<\/b><br>Avg housing growth: 23.60<br>Rent burden change: 1.87<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.054","<b>Muncie, IN Metro Area<\/b><br>Avg housing growth: 5.24<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.016","<b>Napa, CA Metro Area<\/b><br>Avg housing growth: 6.04<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.034","<b>Nashville-Davidson--Murfreesboro--Franklin, TN Metro Area<\/b><br>Avg housing growth: 41.10<br>Rent burden change: 4.86<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.119","<b>New Haven-Milford, CT Metro Area<\/b><br>Avg housing growth: 19.88<br>Rent burden change: -3.69<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.012","<b>Norwich-New London, CT Metro Area<\/b><br>Avg housing growth: 44.25<br>Rent burden change: -2.54<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.013","<b>Ocala, FL Metro Area<\/b><br>Avg housing growth: 30.25<br>Rent burden change: 1.77<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.082","<b>Odessa, TX Metro Area<\/b><br>Avg housing growth: 29.17<br>Rent burden change: 1.91<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.085","<b>Ogden-Clearfield, UT Metro Area<\/b><br>Avg housing growth: 20.89<br>Rent burden change: 3.10<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.132","<b>Oklahoma City, OK Metro Area<\/b><br>Avg housing growth: 19.67<br>Rent burden change: 1.69<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.068","<b>Omaha-Council Bluffs, NE-IA Metro Area<\/b><br>Avg housing growth: 24.04<br>Rent burden change: -0.88<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.056","<b>Orlando-Kissimmee-Sanford, FL Metro Area<\/b><br>Avg housing growth: 34.51<br>Rent burden change: 4.23<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.126","<b>Oshkosh-Neenah, WI Metro Area<\/b><br>Avg housing growth: 46.52<br>Rent burden change: -1.66<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.014","<b>Owensboro, KY Metro Area<\/b><br>Avg housing growth: 27.15<br>Rent burden change: -5.18<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.023","<b>Oxnard-Thousand Oaks-Ventura, CA Metro Area<\/b><br>Avg housing growth: 13.16<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.028","<b>Palm Bay-Melbourne-Titusville, FL Metro Area<\/b><br>Avg housing growth: 24.73<br>Rent burden change: 0.62<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.073","<b>Pensacola-Ferry Pass-Brent, FL Metro Area<\/b><br>Avg housing growth: 25.32<br>Rent burden change: -1.30<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.066","<b>Peoria, IL Metro Area<\/b><br>Avg housing growth: 9.55<br>Rent burden change: 1.82<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.045","<b>Philadelphia-Camden-Wilmington, PA-NJ-DE-MD Metro Area<\/b><br>Avg housing growth: 27.93<br>Rent burden change: -0.36<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.017","<b>Pittsburgh, PA Metro Area<\/b><br>Avg housing growth: 58.85<br>Rent burden change: -1.18<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.010","<b>Portland-Vancouver-Hillsboro, OR-WA Metro Area<\/b><br>Avg housing growth: 29.20<br>Rent burden change: 1.79<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.057","<b>Port St. Lucie, FL Metro Area<\/b><br>Avg housing growth: 28.41<br>Rent burden change: -0.26<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.101","<b>Prescott, AZ Metro Area<\/b><br>Avg housing growth: 38.71<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.057","<b>Provo-Orem, UT Metro Area<\/b><br>Avg housing growth: 40.44<br>Rent burden change: 0.60<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.126","<b>Pueblo, CO Metro Area<\/b><br>Avg housing growth: 13.71<br>Rent burden change: -4.59<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.031","<b>Punta Gorda, FL Metro Area<\/b><br>Avg housing growth: 36.18<br>Rent burden change: -0.75<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.114","<b>Rapid City, SD Metro Area<\/b><br>Avg housing growth: 35.76<br>Rent burden change: -0.80<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.093","<b>Reading, PA Metro Area<\/b><br>Avg housing growth: 10.82<br>Rent burden change: 0.45<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.020","<b>Redding, CA Metro Area<\/b><br>Avg housing growth: 44.90<br>Rent burden change: -8.33<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.008","<b>Richmond, VA Metro Area<\/b><br>Avg housing growth: 50.73<br>Rent burden change: 0.26<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.027","<b>Riverside-San Bernardino-Ontario, CA Metro Area<\/b><br>Avg housing growth: 15.71<br>Rent burden change: -1.44<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.047","<b>Roanoke, VA Metro Area<\/b><br>Avg housing growth: 33.98<br>Rent burden change: -1.25<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.014","<b>Rochester, MN Metro Area<\/b><br>Avg housing growth: 27.81<br>Rent burden change: 4.71<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.094","<b>Rochester, NY Metro Area<\/b><br>Avg housing growth: 32.55<br>Rent burden change: -1.47<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.020","<b>Rocky Mount, NC Metro Area<\/b><br>Avg housing growth: 11.17<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.018","<b>Rome, GA Metro Area<\/b><br>Avg housing growth: 28.63<br>Rent burden change: -0.07<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.019","<b>St. Cloud, MN Metro Area<\/b><br>Avg housing growth: 25.42<br>Rent burden change: 0.45<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.033","<b>St. George, UT Metro Area<\/b><br>Avg housing growth: 41.45<br>Rent burden change: 9.13<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.169","<b>St. Joseph, MO-KS Metro Area<\/b><br>Avg housing growth: 35.69<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.016","<b>Salem, OR Metro Area<\/b><br>Avg housing growth: 20.53<br>Rent burden change: 7.02<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.054","<b>Salinas, CA Metro Area<\/b><br>Avg housing growth: 14.46<br>Rent burden change: 1.35<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.026","<b>Salt Lake City, UT Metro Area<\/b><br>Avg housing growth: 38.95<br>Rent burden change: 3.04<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.052","<b>San Angelo, TX Metro Area<\/b><br>Avg housing growth: 20.23<br>Rent burden change: 0.33<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.035","<b>San Antonio-New Braunfels, TX Metro Area<\/b><br>Avg housing growth: 21.85<br>Rent burden change: 2.78<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.100","<b>San Jose-Sunnyvale-Santa Clara, CA Metro Area<\/b><br>Avg housing growth: 19.33<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.052","<b>Santa Cruz-Watsonville, CA Metro Area<\/b><br>Avg housing growth: 12.50<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.033","<b>Santa Fe, NM Metro Area<\/b><br>Avg housing growth: 21.66<br>Rent burden change: -1.64<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.027","<b>Savannah, GA Metro Area<\/b><br>Avg housing growth: 28.17<br>Rent burden change: 0.72<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.079","<b>Seattle-Tacoma-Bellevue, WA Metro Area<\/b><br>Avg housing growth: 27.19<br>Rent burden change: 1.93<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.077","<b>Sebastian-Vero Beach, FL Metro Area<\/b><br>Avg housing growth: 28.59<br>Rent burden change: 0.54<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.094","<b>Sheboygan, WI Metro Area<\/b><br>Avg housing growth: 49.12<br>Rent burden change: 2.29<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.009","<b>Sherman-Denison, TX Metro Area<\/b><br>Avg housing growth: 27.94<br>Rent burden change: 8.34<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.082","<b>Shreveport-Bossier City, LA Metro Area<\/b><br>Avg housing growth: 7.64<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.107","<b>Sioux City, IA-NE-SD Metro Area<\/b><br>Avg housing growth: 20.24<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.135","<b>Sioux Falls, SD Metro Area<\/b><br>Avg housing growth: 42.58<br>Rent burden change: -0.76<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.095","<b>South Bend-Mishawaka, IN-MI Metro Area<\/b><br>Avg housing growth: 35.67<br>Rent burden change: 2.23<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.009","<b>Spartanburg, SC Metro Area<\/b><br>Avg housing growth: 29.53<br>Rent burden change: 0.78<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.108","<b>Springfield, IL Metro Area<\/b><br>Avg housing growth: 34.20<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.011","<b>Springfield, MO Metro Area<\/b><br>Avg housing growth: 22.05<br>Rent burden change: -3.00<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.047","<b>State College, PA Metro Area<\/b><br>Avg housing growth: 12.03<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.048","<b>Sumter, SC Metro Area<\/b><br>Avg housing growth: 9.56<br>Rent burden change: -2.18<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.214","<b>Syracuse, NY Metro Area<\/b><br>Avg housing growth: 11.33<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.024","<b>Tallahassee, FL Metro Area<\/b><br>Avg housing growth: 46.26<br>Rent burden change: -2.01<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.029","<b>Tampa-St. Petersburg-Clearwater, FL Metro Area<\/b><br>Avg housing growth: 26.24<br>Rent burden change: 5.15<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.081","<b>Terre Haute, IN Metro Area<\/b><br>Avg housing growth: 17.49<br>Rent burden change: 0.64<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.045","<b>Topeka, KS Metro Area<\/b><br>Avg housing growth: 29.75<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.007","<b>Tucson, AZ Metro Area<\/b><br>Avg housing growth: 24.72<br>Rent burden change: -0.68<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.037","<b>Tulsa, OK Metro Area<\/b><br>Avg housing growth: 23.06<br>Rent burden change: 1.09<br>YIMBY score: 1<br>Pop growth (5yr avg): 0.042","<b>Tuscaloosa, AL Metro Area<\/b><br>Avg housing growth: 16.83<br>Rent burden change: -2.70<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.099","<b>Tyler, TX Metro Area<\/b><br>Avg housing growth: 9.90<br>Rent burden change: -2.30<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.065","<b>Utica-Rome, NY Metro Area<\/b><br>Avg housing growth: 7.94<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.011","<b>Valdosta, GA Metro Area<\/b><br>Avg housing growth: 57.23<br>Rent burden change: -0.97<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.031","<b>Vallejo-Fairfield, CA Metro Area<\/b><br>Avg housing growth: 7.73<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.056","<b>Virginia Beach-Norfolk-Newport News, VA-NC Metro Area<\/b><br>Avg housing growth: 26.63<br>Rent burden change: -1.63<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.030","<b>Visalia-Porterville, CA Metro Area<\/b><br>Avg housing growth: 17.08<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.036","<b>Waco, TX Metro Area<\/b><br>Avg housing growth: 18.62<br>Rent burden change: 0.27<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.092","<b>Warner Robins, GA Metro Area<\/b><br>Avg housing growth: 33.16<br>Rent burden change: -4.10<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.190","<b>Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area<\/b><br>Avg housing growth: 22.58<br>Rent burden change: -1.96<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.058","<b>Waterloo-Cedar Falls, IA Metro Area<\/b><br>Avg housing growth: 45.60<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.015","<b>Wausau, WI Metro Area<\/b><br>Avg housing growth: 43.41<br>Rent burden change: 1.26<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.014","<b>Wheeling, WV-OH Metro Area<\/b><br>Avg housing growth: 13.36<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.004","<b>Wichita, KS Metro Area<\/b><br>Avg housing growth: 45.58<br>Rent burden change: -0.93<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.022","<b>Wichita Falls, TX Metro Area<\/b><br>Avg housing growth: 35.62<br>Rent burden change: NaN<br>YIMBY score: NA<br>Pop growth (5yr avg): 0.008","<b>Winchester, VA-WV Metro Area<\/b><br>Avg housing growth: 30.04<br>Rent burden change: -0.40<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.065","<b>Winston-Salem, NC Metro Area<\/b><br>Avg housing growth: 26.46<br>Rent burden change: -1.86<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.184","<b>Yakima, WA Metro Area<\/b><br>Avg housing growth: 23.13<br>Rent burden change: -2.77<br>YIMBY score: 3<br>Pop growth (5yr avg): 0.021","<b>York-Hanover, PA Metro Area<\/b><br>Avg housing growth: 16.27<br>Rent burden change: -2.15<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.026","<b>Yuba City, CA Metro Area<\/b><br>Avg housing growth: 14.65<br>Rent burden change: 1.68<br>YIMBY score: 2<br>Pop growth (5yr avg): 0.041","<b>Yuma, AZ Metro Area<\/b><br>Avg housing growth: 37.10<br>Rent burden change: -8.10<br>YIMBY score: 4<br>Pop growth (5yr avg): 0.032"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(204,71,121,1)","rgba(13,8,135,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(13,8,135,1)"],"opacity":0.84999999999999998,"size":[11.579608926488712,8.2825278091380596,10.001730444208615,10.279394766737944,8.4195378321782943,10.685420744683247,11.508400921432532,16.20819809009101,11.048633325787566,11.316541215176908,11.493658713837354,12.389595529036198,12.698020125083346,14.102470219207675,14.870902042386486,12.285785612795832,10.023875593214507,11.45788414122738,12.016215307848332,12.948838204478665,13.512707342630044,9.0764250717663177,9.7220883272300398,14.029910189070117,13.961566351929608,11.875779333526804,16.879927174484497,11.998822598826216,10.548868767267685,10.334497889709377,12.556765506023114,13.084359522255966,11.185594722492045,15.241671697727771,12.247100204327527,11.117812086998489,11.242351924487735,14.639688074388559,11.515953730980595,11.844864208480971,11.036894278379753,14.116036023354036,12.044524137813013,14.918346065652468,14.182894039559526,13.448985758302159,14.319822665912898,12.061602923007912,12.43175919377806,11.54112737311495,13.367355353646214,11.826202567551144,12.706159528135448,17.648440622846685,9.2469131411200642,14.044076387445154,10.168810703609619,8.8698057097643979,11.016260986898493,7.559055118110237,16.271366016666835,14.616461108465844,10.284470708133,12.77265066206669,10.475958015778248,10.985483736899557,14.637196123329026,11.198814450856901,11.251010159851486,10.340381559063299,11.481522072917024,9.6574543807234612,14.185109826414861,15.53513357149815,14.370522478225853,11.614683599599882,10.213060986689813,10.893520140182792,9.7204674970415343,11.385026970975209,12.522317959008165,15.080519229632799,13.000295763693348,11.407416369951594,10.733899965799006,11.421673679881494,18.538029883162395,10.630985520545838,15.711349448002879,11.225002401047446,11.460338450443434,9.917159938735093,11.697146704311312,11.849423952106198,10.010678794844937,13.110531487418301,10.244892361166713,17.056208496868425,13.795245702092688,14.329049608095003,13.067608904794717,10.631102656279984,11.658985145542173,18.113725905108087,14.165470824772649,13.128642836371355,9.7504532201200522,10.573663507952769,12.353317678004398,10.328419905587872,10.743612178100573,11.374812894109716,10.303429776470562,14.900052077520471,22.677165354330711,12.076756676715078,11.835091889691492,15.052596927409978,11.172560181932072,13.121999240886613,12.744407966025642,10.730837274042628,11.673408822142141,11.951597191532555,11.498589148664559,10.994236537625032,10.630714832034283,11.834385484258499,9.0552706282129094,12.50764560975991,11.349465478164291,13.927815454330826,15.755589290683725,12.022645926738498,13.214945287235228,10.747005806429939,9.7752141946899282,13.583946817447666,11.034862800028204,11.304831768361138,12.746963212557196,11.84055743129759,9.8723522690274859,12.431091919700961,9.6846997226857994,15.159081197387518,9.1612829341598339,12.361925304249274,12.274295840456931,10.173781723442813,11.363847761360844,13.629908917664526,10.952595722479828,11.784149098057556,12.336628425759608,10.100378638623321,11.315812915072524,14.67889393254284,9.7039340888828498,9.8011025370173073,13.451260909816556,13.552881955787608,15.071690930652357,12.931924982958412,12.419874296813486,14.890776526618506,9.8614979473524187,10.594272536926697,10.957922843951868,13.1165363697513,12.852452244356284,11.884299724326853,10.163429754146655,9.5411595673142759,12.450628498678023,14.104259829141766,12.443740974430556,14.881236293019498,11.128692548849587,14.524832804022006,13.850581554563842,10.405781514141353,9.2237252113646999,10.873548448274844,12.016451764576365,9.9237983029417887,13.891838495867662,10.386412393095217,10.267732628489036,10.292851710839527,11.227887542236678,16.05322545186759,10.110781104796027,12.320886351342509,10.800383911497667,12.226270329298529,11.38452049623767,14.069465467259041,12.21792243156184,11.267267970175363,10.872382175775058,13.34412874292949,13.261949746717615,13.886820454813618,9.3381462069726791,13.466914321845238,14.296083519998643,15.159398863114772,13.907758880785943,9.3495355316360875,14.353732947513697,9.6380135867346102,12.008392021742736,12.058317764759376,17.120060372417083,10.671137964245732,11.003613772576449,13.413992779906771,11.915271914276087,9.065247454629251,11.457399188824475,11.746648852988239,14.030746935045428,12.808305274468012,9.6371141145912738,11.131635388261278,12.396908020249606,11.048530175690816,11.436890020555293,13.815632783095941,16.566664447581253,12.502978346257384,9.9885298910516802,9.8646766628565405,8.6129587967807453,10.539924242250581,9.248123284499103,12.798990042077328,16.440400227000893,10.492829519578017,10.830395482695865,11.686518573640598,11.207949456694235],"symbol":"circle","line":{"width":1.8897637795275593,"color":["rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(204,71,121,1)","rgba(13,8,135,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(13,8,135,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(13,8,135,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(248,148,65,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(204,71,121,1)","rgba(248,148,65,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(248,148,65,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(13,8,135,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(204,71,121,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(127,127,127,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(126,3,168,1)","rgba(204,71,121,1)","rgba(204,71,121,1)","rgba(13,8,135,1)"]}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[30.043832250435045,36.175873864905491,37.328275894991236,28.412807766537171,34.558708887679273,39.683193702004587,34.049114147360612,28.092539969570087],"y":[-3.8684564385200915,-0.75048605431615556,-0.27497653722955562,-0.26376433989146619,-3.764048338692497,-7.3096941751766735,-1.5667617918159706,-4.1279260981070465],"text":"","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(244,67,54,1)","opacity":0.65000000000000002,"size":9.4488188976377963,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(244,67,54,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-4.4408920985006262e-16],"y":[-10],"name":"ceffcff58543feda72b476913fa41064","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#F0F921"],[0.0033444816053511705,"#F0F724"],[0.006688963210702341,"#F1F625"],[0.010033444816053512,"#F1F426"],[0.013377926421404682,"#F1F326"],[0.016722408026755852,"#F2F127"],[0.020066889632107024,"#F3F027"],[0.023411371237458192,"#F3EE27"],[0.026755852842809364,"#F4ED27"],[0.030100334448160536,"#F5EC27"],[0.033444816053511704,"#F5EA26"],[0.036789297658862873,"#F5E926"],[0.040133779264214048,"#F6E826"],[0.043478260869565216,"#F6E626"],[0.046822742474916385,"#F7E425"],[0.05016722408026756,"#F7E225"],[0.053511705685618728,"#F8E125"],[0.056856187290969896,"#F8E025"],[0.060200668896321072,"#F8DE25"],[0.06354515050167224,"#F9DD25"],[0.066889632107023408,"#F9DC24"],[0.070234113712374577,"#FADA24"],[0.073578595317725745,"#FAD824"],[0.076923076923076927,"#FBD724"],[0.080267558528428096,"#FBD624"],[0.083612040133779264,"#FBD424"],[0.086956521739130432,"#FBD324"],[0.090301003344481601,"#FCD225"],[0.093645484949832769,"#FCD025"],[0.096989966555183951,"#FCCF25"],[0.10033444816053512,"#FCCD25"],[0.10367892976588629,"#FCCC25"],[0.10702341137123746,"#FDCB26"],[0.11036789297658862,"#FDCA26"],[0.11371237458193979,"#FDC827"],[0.11705685618729096,"#FDC627"],[0.12040133779264214,"#FDC527"],[0.12374581939799331,"#FDC428"],[0.12709030100334448,"#FDC328"],[0.13043478260869565,"#FDC129"],[0.13377926421404682,"#FEC029"],[0.13712374581939799,"#FEBE2A"],[0.14046822742474915,"#FEBD2A"],[0.14381270903010032,"#FEBC2B"],[0.14715719063545149,"#FEBA2C"],[0.15050167224080269,"#FEB92C"],[0.15384615384615385,"#FEB82C"],[0.15719063545150502,"#FEB72D"],[0.16053511705685619,"#FDB52E"],[0.16387959866220736,"#FDB42F"],[0.16722408026755853,"#FDB32F"],[0.1705685618729097,"#FDB22F"],[0.17391304347826086,"#FDB030"],[0.17725752508361203,"#FDAF31"],[0.1806020066889632,"#FDAE32"],[0.18394648829431437,"#FDAC33"],[0.18729096989966554,"#FDAB33"],[0.19063545150501671,"#FCAA34"],[0.1939799331103679,"#FCA934"],[0.19732441471571907,"#FCA735"],[0.20066889632107024,"#FCA636"],[0.20401337792642141,"#FCA537"],[0.20735785953177258,"#FCA338"],[0.21070234113712374,"#FBA238"],[0.21404682274247491,"#FBA139"],[0.21739130434782608,"#FBA039"],[0.22073578595317725,"#FB9F3A"],[0.22408026755852842,"#FA9E3B"],[0.22742474916387959,"#FA9C3C"],[0.23076923076923075,"#FA9B3D"],[0.23411371237458192,"#F99A3E"],[0.23745819397993312,"#F9993E"],[0.24080267558528429,"#F9983E"],[0.24414715719063546,"#F9963F"],[0.24749163879598662,"#F89540"],[0.25083612040133779,"#F89441"],[0.25418060200668896,"#F79342"],[0.25752508361204013,"#F79243"],[0.2608695652173913,"#F79044"],[0.26421404682274247,"#F79044"],[0.26755852842809363,"#F68F44"],[0.2709030100334448,"#F68D45"],[0.27424749163879597,"#F58C46"],[0.27759197324414714,"#F58B47"],[0.28093645484949831,"#F48A48"],[0.28428093645484948,"#F48948"],[0.28762541806020064,"#F48849"],[0.29096989966555181,"#F3874A"],[0.29431438127090298,"#F3854B"],[0.29765886287625415,"#F2844B"],[0.30100334448160537,"#F1834C"],[0.30434782608695654,"#F1824D"],[0.30769230769230771,"#F1814D"],[0.31103678929765888,"#F0804E"],[0.31438127090301005,"#F07F4F"],[0.31772575250836121,"#EF7E50"],[0.32107023411371238,"#EF7C51"],[0.32441471571906355,"#EE7B51"],[0.32775919732441472,"#ED7A52"],[0.33110367892976589,"#ED7A52"],[0.33444816053511706,"#ED7853"],[0.33779264214046822,"#EC7754"],[0.34113712374581939,"#EB7655"],[0.34448160535117056,"#EB7556"],[0.34782608695652173,"#EA7457"],[0.3511705685618729,"#E97357"],[0.35451505016722407,"#E97257"],[0.35785953177257523,"#E97158"],[0.3612040133779264,"#E87059"],[0.36454849498327757,"#E76F5A"],[0.36789297658862874,"#E76E5B"],[0.37123745819397991,"#E66D5C"],[0.37458193979933108,"#E56B5D"],[0.37792642140468224,"#E56B5D"],[0.38127090301003341,"#E56A5D"],[0.38461538461538458,"#E4695E"],[0.38795986622073581,"#E3685F"],[0.39130434782608697,"#E26660"],[0.39464882943143814,"#E26561"],[0.39799331103678931,"#E26561"],[0.40133779264214048,"#E16462"],[0.40468227424749165,"#E06363"],[0.40802675585284282,"#DF6263"],[0.41137123745819398,"#DE6164"],[0.41471571906354515,"#DE5F65"],[0.41806020066889632,"#DD5E66"],[0.42140468227424749,"#DD5E66"],[0.42474916387959866,"#DC5D67"],[0.42809364548494983,"#DB5C68"],[0.43143812709030099,"#DA5B69"],[0.43478260869565216,"#DA5A6A"],[0.43812709030100333,"#D9596A"],[0.4414715719063545,"#D8576B"],[0.44481605351170567,"#D8576B"],[0.44816053511705684,"#D7566C"],[0.451505016722408,"#D6556D"],[0.45484949832775917,"#D5546E"],[0.45819397993311034,"#D5536F"],[0.46153846153846151,"#D45270"],[0.46488294314381268,"#D35171"],[0.46822742474916385,"#D35071"],[0.47157190635451507,"#D24F71"],[0.47491638795986624,"#D14E72"],[0.47826086956521741,"#D04D73"],[0.48160535117056857,"#CF4C74"],[0.48494983277591974,"#CE4B75"],[0.48829431438127091,"#CD4A76"],[0.49163879598662208,"#CD4A76"],[0.49498327759197325,"#CC4977"],[0.49832775919732442,"#CC4778"],[0.50167224080267558,"#CB4679"],[0.50501672240802675,"#CA457A"],[0.50836120401337792,"#C9447A"],[0.51170568561872909,"#C9447A"],[0.51505016722408026,"#C8437B"],[0.51839464882943143,"#C7427C"],[0.52173913043478259,"#C6417D"],[0.52508361204013376,"#C5407E"],[0.52842809364548493,"#C43F7F"],[0.5317725752508361,"#C33D80"],[0.53511705685618727,"#C33D80"],[0.53846153846153844,"#C23C81"],[0.5418060200668896,"#C13B82"],[0.54515050167224077,"#C03A83"],[0.54849498327759194,"#BF3984"],[0.55183946488294311,"#BE3885"],[0.55518394648829428,"#BD3786"],[0.55852842809364545,"#BD3686"],[0.56187290969899661,"#BC3587"],[0.56521739130434778,"#BB3488"],[0.56856187290969895,"#BA3388"],[0.57190635451505012,"#B83289"],[0.57525083612040129,"#B7318A"],[0.57859531772575246,"#B6308B"],[0.58193979933110362,"#B6308B"],[0.58528428093645479,"#B52F8C"],[0.58862876254180596,"#B42E8D"],[0.59197324414715713,"#B32C8E"],[0.5953177257525083,"#B22B8F"],[0.59866220735785947,"#B12A90"],[0.60200668896321075,"#B02991"],[0.60535117056856191,"#AF2991"],[0.60869565217391308,"#AE2892"],[0.61204013377926425,"#AD2793"],[0.61538461538461542,"#AC2694"],[0.61872909698996659,"#AB2494"],[0.62207357859531776,"#AA2395"],[0.62541806020066892,"#A92395"],[0.62876254180602009,"#A82296"],[0.63210702341137126,"#A72197"],[0.63545150501672243,"#A62098"],[0.6387959866220736,"#A51F99"],[0.64214046822742477,"#A41E9A"],[0.64548494983277593,"#A21D9A"],[0.6488294314381271,"#A21C9A"],[0.65217391304347827,"#A11B9B"],[0.65551839464882944,"#A01A9C"],[0.65886287625418061,"#9E199D"],[0.66220735785953178,"#9D189D"],[0.66555183946488294,"#9C179E"],[0.66889632107023411,"#9B169F"],[0.67224080267558528,"#9A169F"],[0.67558528428093645,"#99159F"],[0.67892976588628762,"#9814A0"],[0.68227424749163879,"#9613A1"],[0.68561872909698995,"#9511A1"],[0.68896321070234112,"#9410A2"],[0.69230769230769229,"#930FA3"],[0.69565217391304346,"#920FA3"],[0.69899665551839463,"#910EA3"],[0.7023411371237458,"#8F0DA4"],[0.70568561872909696,"#8E0CA4"],[0.70903010033444813,"#8D0BA5"],[0.7123745819397993,"#8C0AA5"],[0.71571906354515047,"#8A09A5"],[0.71906354515050164,"#8909A5"],[0.72240802675585281,"#8808A6"],[0.72575250836120397,"#8707A6"],[0.72909698996655514,"#8606A6"],[0.73244147157190631,"#8405A7"],[0.73578595317725748,"#8305A7"],[0.73913043478260865,"#8205A7"],[0.74247491638795982,"#8104A7"],[0.74581939799331098,"#8004A8"],[0.74916387959866215,"#7E03A8"],[0.75250836120401332,"#7D03A8"],[0.75585284280936449,"#7C02A8"],[0.75919732441471566,"#7A02A8"],[0.76254180602006683,"#7902A8"],[0.76588628762541799,"#7801A8"],[0.76923076923076916,"#7701A8"],[0.77257525083612044,"#7501A8"],[0.77591973244147161,"#7401A8"],[0.77926421404682278,"#7301A8"],[0.78260869565217395,"#7100A8"],[0.78595317725752512,"#7000A8"],[0.78929765886287628,"#6F00A8"],[0.79264214046822745,"#6E00A8"],[0.79598662207357862,"#6C00A8"],[0.79933110367892979,"#6A00A8"],[0.80267558528428096,"#6900A8"],[0.80602006688963213,"#6800A8"],[0.80936454849498329,"#6700A8"],[0.81270903010033446,"#6600A7"],[0.81605351170568563,"#6400A7"],[0.8193979933110368,"#6300A7"],[0.82274247491638797,"#6100A7"],[0.82608695652173914,"#6001A6"],[0.8294314381270903,"#5F01A6"],[0.83277591973244147,"#5D01A6"],[0.83612040133779264,"#5C01A6"],[0.83946488294314381,"#5B01A5"],[0.84280936454849498,"#5901A5"],[0.84615384615384615,"#5801A4"],[0.84949832775919731,"#5701A4"],[0.85284280936454848,"#5601A4"],[0.85618729096989965,"#5402A4"],[0.85953177257525082,"#5302A3"],[0.86287625418060199,"#5102A3"],[0.86622073578595316,"#5002A2"],[0.86956521739130432,"#4F02A2"],[0.87290969899665549,"#4D02A1"],[0.87625418060200666,"#4C02A1"],[0.87959866220735783,"#4A03A1"],[0.882943143812709,"#4903A0"],[0.88628762541806017,"#48039F"],[0.88963210702341133,"#46039F"],[0.8929765886287625,"#45039E"],[0.89632107023411367,"#43039E"],[0.89966555183946484,"#42039E"],[0.90301003344481601,"#40049D"],[0.90635451505016718,"#3F049C"],[0.90969899665551834,"#3E049C"],[0.91304347826086951,"#3C049B"],[0.91638795986622068,"#3B049A"],[0.91973244147157185,"#39049A"],[0.92307692307692302,"#38049A"],[0.92642140468227419,"#370499"],[0.92976588628762535,"#350498"],[0.93311036789297652,"#330597"],[0.93645484949832769,"#310597"],[0.93979933110367886,"#300596"],[0.94314381270903014,"#2E0595"],[0.94648829431438131,"#2D0595"],[0.94983277591973247,"#2C0594"],[0.95317725752508364,"#2A0593"],[0.95652173913043481,"#280592"],[0.95986622073578598,"#260591"],[0.96321070234113715,"#250691"],[0.96655518394648832,"#230691"],[0.96989966555183948,"#210690"],[0.97324414715719065,"#1F068F"],[0.97658862876254182,"#1D068E"],[0.97993311036789299,"#1B068D"],[0.98327759197324416,"#1A068C"],[0.98662207357859533,"#17078B"],[0.98996655518394649,"#15078A"],[0.99331103678929766,"#120789"],[0.99665551839464883,"#100788"],[1,"#0D0887"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":23.039999999999996,"title":"YIMBY Score<br />(out of 4)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205},"tickmode":"array","ticktext":["0","1","2","3","4"],"tickvals":[0.0016666666666666668,0.2508333333333333,0.49999999999999994,0.74916666666666665,0.99833333333333329],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.955168119551681},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":47.083437110834382,"r":7.9701120797011216,"b":43.835616438356176,"l":47.023661270236623},"font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241},"title":{"text":"<b> YIMBY Success: Housing Growth vs. Rent Burden Change <\/b>","font":{"color":"rgba(33,33,33,1)","family":"","size":19.925280199252807},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.068540612313285,74.39223663002106],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[-4.4408920985006262e-16,20,40,59.999999999999993],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.9850560398505603,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.72455564360919278,"zeroline":false,"anchor":"y","title":{"text":"Average Housing Growth Index","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-11.310889599128537,10.102853221154234],"tickmode":"array","ticktext":["-10","-5","0","5","10"],"tickvals":[-10,-5,0,5,10],"categoryorder":"array","categoryarray":["-10","-5","0","5","10"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.9850560398505608,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.72455564360919289,"zeroline":false,"anchor":"x","title":{"text":"Change in Rent Burden Index (Recent â€“ Early)","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.955168119551681},"title":{"text":"Population Growth (5yr Avg)<br />YIMBY Score<br />(out of 4)","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"458816b8ae80":{"xmin":{},"xmax":{},"ymin":{},"ymax":{},"type":"scatter"},"458836c86127":{"x":{},"y":{}},"45881d62638a":{"yintercept":{}},"458826750818":{"xintercept":{}},"45884d667361":{"x":{},"y":{},"colour":{},"size":{},"text":{}},"45881210cfa":{"x":{},"y":{}}},"cur_data":"458816b8ae80","visdat":{"458816b8ae80":["function (y) ","x"],"458836c86127":["function (y) ","x"],"45881d62638a":["function (y) ","x"],"458826750818":["function (y) ","x"],"45884d667361":["function (y) ","x"],"45881210cfa":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-yimby-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="section-1" class="level4">
<h4 class="anchored" data-anchor-id="section-1"></h4>
<section id="visualization-2" class="level5">
<h5 class="anchored" data-anchor-id="visualization-2">Visualization 2:</h5>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualization 2: Early vs. Recent Rent Burden (Enhanced)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>viz2 <span class="ot">&lt;-</span> yimby_analysis <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(early_rent_burden), <span class="sc">!</span><span class="fu">is.na</span>(recent_rent_burden)) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> early_rent_burden,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> recent_rent_burden</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Points with strong color mapping</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> avg_housing_growth, <span class="at">size =</span> avg_pop_growth, <span class="at">alpha =</span> <span class="fl">0.8</span>),</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">stroke =</span> <span class="fl">0.4</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Highlight YIMBY success region (below diagonal, high housing growth)</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">data.frame</span>(</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span>, <span class="cn">Inf</span>),</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="sc">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span>)</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y),</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">alpha =</span> <span class="fl">0.02</span>, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Diagonal reference line</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, </span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray40"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Smooth trend line</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"darkorange"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>, <span class="at">linetype =</span> <span class="st">"solid"</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Color &amp; size scales</span></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Avg Housing Growth Index"</span>,</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"plasma"</span>,</span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="dv">1</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(</span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Avg Population Growth Rate"</span>,</span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">6</span>)</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Labels</span></span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Early vs. Recent Rent Burden by Metropolitan Area"</span>,</span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Metros below the diagonal show improved affordability.</span><span class="sc">\n</span><span class="st">Color = Housing Growth | Size = Population Growth"</span>,</span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Early Period Rent Burden Index (2014â€“2016)"</span>,</span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Recent Period Rent Burden Index (2020+)"</span>,</span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Rent Burden &amp; Housing Growth Analysis | Highlighted region â‰ˆ YIMBY success zone"</span></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean minimal theme with layout refinements</span></span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"gray30"</span>),</span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray90"</span>),</span>
<span id="cb38-63"><a href="#cb38-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb38-64"><a href="#cb38-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box =</span> <span class="st">"vertical"</span>,</span>
<span id="cb38-65"><a href="#cb38-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb38-66"><a href="#cb38-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-67"><a href="#cb38-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-68"><a href="#cb38-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add annotation for YIMBY success zone</span></span>
<span id="cb38-69"><a href="#cb38-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb38-70"><a href="#cb38-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">"text"</span>,</span>
<span id="cb38-71"><a href="#cb38-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">min</span>(yimby_analysis<span class="sc">$</span>early_rent_burden, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">20</span>,</span>
<span id="cb38-72"><a href="#cb38-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">min</span>(yimby_analysis<span class="sc">$</span>recent_rent_burden, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">9</span>,</span>
<span id="cb38-73"><a href="#cb38-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"YIMBY Success Zone</span><span class="sc">\n</span><span class="st">(Rent Burden â†“, Growth â†‘)"</span>,</span>
<span id="cb38-74"><a href="#cb38-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"darkgreen"</span>,</span>
<span id="cb38-75"><a href="#cb38-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb38-76"><a href="#cb38-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">4.2</span></span>
<span id="cb38-77"><a href="#cb38-77" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-78"><a href="#cb38-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-79"><a href="#cb38-79" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(viz2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="section-2" class="level1">
<h1>===========================</h1>
</section>
<section id="yimby-success-stories-table" class="level1">
<h1>YIMBY Success Stories Table</h1>
</section>
<section id="section-3" class="level1">
<h1>===========================</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter metros meeting 3+ YIMBY criteria and sort by score &amp; housing growth</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>top_yimby_metros <span class="ot">&lt;-</span> yimby_analysis <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yimby_score <span class="sc">&gt;=</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(yimby_score), <span class="fu">desc</span>(avg_housing_growth)) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">burden_change_fmt =</span> <span class="fu">paste0</span>(<span class="fu">ifelse</span>(rent_burden_change <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">""</span>, <span class="st">"+"</span>),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">round</span>(rent_burden_change, <span class="dv">1</span>)),</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">housing_growth_fmt =</span> <span class="fu">round</span>(avg_housing_growth, <span class="dv">1</span>),</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_growth_fmt =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(avg_pop_growth <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"**YIMBY SUCCESS STORIES** (Metros meeting â‰¥3 criteria)</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>**YIMBY SUCCESS STORIES** (Metros meeting â‰¥3 criteria)</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">nrow</span>(top_yimby_metros) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Table header</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"| Metropolitan Area | YIMBY Score | Burden Change | Housing Growth | Population Growth |</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"|-------------------|-------------|---------------|----------------|-----------------|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Table rows</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(top_yimby_metros))) {</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"|"</span>, top_yimby_metros<span class="sc">$</span>NAME[i], <span class="st">"|"</span>, top_yimby_metros<span class="sc">$</span>yimby_score[i], <span class="st">"|"</span>,</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>        top_yimby_metros<span class="sc">$</span>burden_change_fmt[i], <span class="st">"|"</span>, </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>        top_yimby_metros<span class="sc">$</span>housing_growth_fmt[i], <span class="st">"|"</span>,</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>        top_yimby_metros<span class="sc">$</span>pop_growth_fmt[i], <span class="st">"|</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summary</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  perfect_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(top_yimby_metros<span class="sc">$</span>yimby_score <span class="sc">==</span> <span class="dv">4</span>)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**Summary:**"</span>, <span class="fu">nrow</span>(top_yimby_metros), <span class="st">"metros meet â‰¥3 YIMBY criteria,"</span>,</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">"including"</span>, perfect_count, <span class="st">"with perfect scores.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No metros found meeting 3+ YIMBY criteria.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>| Metropolitan Area | YIMBY Score | Burden Change | Housing Growth | Population Growth |
|-------------------|-------------|---------------|----------------|-----------------|
| Valdosta, GA Metro Area | 4 | -1 | 57.2 | 3.1% |
| Brownsville-Harlingen, TX Metro Area | 4 | -6.3 | 51 | 1.9% |
| Tallahassee, FL Metro Area | 4 | -2 | 46.3 | 2.9% |
| Redding, CA Metro Area | 4 | -8.3 | 44.9 | 0.8% |
| Johnson City, TN Metro Area | 4 | -4.1 | 43.7 | 2.2% |
| Hanford-Corcoran, CA Metro Area | 4 | -0.8 | 43 | 1.4% |
| Las Cruces, NM Metro Area | 4 | -7.8 | 42.5 | 2.5% |
| Lake Charles, LA Metro Area | 4 | -1 | 41.8 | 4.9% |
| Mobile, AL Metro Area | 4 | -1.4 | 39.8 | 1.7% |
| Burlington, NC Metro Area | 4 | -7.3 | 39.7 | 7.2% |
| Dothan, AL Metro Area | 4 | -4.5 | 38.5 | 1.9% |
| Missoula, MT Metro Area | 4 | -5.6 | 37.8 | 5.3% |
| Clarksville, TN-KY Metro Area | 4 | -0.3 | 37.3 | 10.1% |
| Yuma, AZ Metro Area | 4 | -8.1 | 37.1 | 3.2% |
| Punta Gorda, FL Metro Area | 4 | -0.8 | 36.2 | 11.4% |
| Grand Junction, CO Metro Area | 4 | -2.6 | 35.8 | 3.6% |
| Bangor, ME Metro Area | 4 | -2.7 | 34.7 | 1.5% |
| Jonesboro, AR Metro Area | 4 | -4 | 34.6 | 5.5% |
| Atlantic City-Hammonton, NJ Metro Area | 4 | -3.8 | 34.6 | 10.1% |
| Dover, DE Metro Area | 4 | -1.6 | 34 | 6.4% |
| Albuquerque, NM Metro Area | 4 | -0.9 | 33.2 | 1.9% |
| Burlington-South Burlington, VT Metro Area | 4 | -0.6 | 31.6 | 3.2% |
| Cleveland, TN Metro Area | 4 | -4.8 | 30.9 | 4.8% |
| Auburn-Opelika, AL Metro Area | 4 | -3.9 | 30 | 12.5% |
| Port St. Lucie, FL Metro Area | 4 | -0.3 | 28.4 | 10.1% |
| McAllen-Edinburg-Mission, TX Metro Area | 4 | -4.1 | 28.1 | 6.4% |
| Pittsburgh, PA Metro Area | 3 | -1.2 | 58.9 | 1% |
| Richmond, VA Metro Area | 3 | +0.3 | 50.7 | 2.7% |
| Oshkosh-Neenah, WI Metro Area | 3 | -1.7 | 46.5 | 1.4% |
| Lawrence, KS Metro Area | 3 | -2.5 | 45.7 | 4.1% |
| Wichita, KS Metro Area | 3 | -0.9 | 45.6 | 2.2% |
| Norwich-New London, CT Metro Area | 3 | -2.5 | 44.3 | 1.3% |
| Joplin, MO Metro Area | 3 | -1.5 | 43.8 | 1.9% |
| Sioux Falls, SD Metro Area | 3 | -0.8 | 42.6 | 9.5% |
| Columbia, MO Metro Area | 3 | -0.7 | 42 | 10.7% |
| St. George, UT Metro Area | 3 | +9.1 | 41.4 | 16.9% |
| Coeur d'Alene, ID Metro Area | 3 | +4.5 | 40.2 | 12.7% |
| Great Falls, MT Metro Area | 3 | -3.4 | 40.1 | 2.3% |
| Ithaca, NY Metro Area | 3 | +2.4 | 39.2 | 2.3% |
| Grand Forks, ND-MN Metro Area | 3 | -5.3 | 38.2 | 2.5% |
| Cape Coral-Fort Myers, FL Metro Area | 3 | +8.8 | 36.8 | 13.8% |
| Crestview-Fort Walton Beach-Destin, FL Metro Area | 3 | +5 | 35.9 | 23.8% |
| Rapid City, SD Metro Area | 3 | -0.8 | 35.8 | 9.3% |
| Fargo, ND-MN Metro Area | 3 | -1.2 | 35.7 | 10.3% |
| Jacksonville, FL Metro Area | 3 | +1.8 | 35.6 | 10.3% |
| Binghamton, NY Metro Area | 3 | -2.5 | 35.6 | 0.7% |
| Lubbock, TX Metro Area | 3 | +1.7 | 34.8 | 7.6% |
| Boulder, CO Metro Area | 3 | +5.7 | 34.7 | 4.5% |
| Orlando-Kissimmee-Sanford, FL Metro Area | 3 | +4.2 | 34.5 | 12.6% |
| Iowa City, IA Metro Area | 3 | -2.7 | 34.4 | 7.2% |
| Roanoke, VA Metro Area | 3 | -1.3 | 34 | 1.4% |
| Eau Claire, WI Metro Area | 3 | -5.2 | 33.8 | 3.2% |
| Columbia, SC Metro Area | 3 | +0.9 | 33.5 | 4.8% |
| Lake Havasu City-Kingman, AZ Metro Area | 3 | +0.7 | 33.3 | 4.4% |
| Warner Robins, GA Metro Area | 3 | -4.1 | 33.2 | 19% |
| Flagstaff, AZ Metro Area | 3 | +5 | 33 | 4% |
| Durham-Chapel Hill, NC Metro Area | 3 | +0.3 | 33 | 11.8% |
| Rochester, NY Metro Area | 3 | -1.5 | 32.6 | 2% |
| Colorado Springs, CO Metro Area | 3 | +6.5 | 32 | 8.2% |
| Asheville, NC Metro Area | 3 | +0.4 | 32 | 5.6% |
| Anchorage, AK Metro Area | 3 | -1.6 | 31.9 | 3% |
| Florence-Muscle Shoals, AL Metro Area | 3 | -4.5 | 30.9 | 2.7% |
| Casper, WY Metro Area | 3 | -1 | 30.9 | 5.2% |
| Ocala, FL Metro Area | 3 | +1.8 | 30.2 | 8.2% |
| Winchester, VA-WV Metro Area | 3 | -0.4 | 30 | 6.5% |
| Lakeland-Winter Haven, FL Metro Area | 3 | +0.2 | 30 | 13.2% |
| Dalton, GA Metro Area | 3 | -4 | 29.4 | 1.7% |
| Portland-Vancouver-Hillsboro, OR-WA Metro Area | 3 | +1.8 | 29.2 | 5.7% |
| Odessa, TX Metro Area | 3 | +1.9 | 29.2 | 8.5% |
| Dubuque, IA Metro Area | 3 | -1.1 | 29.1 | 2.1% |
| Lynchburg, VA Metro Area | 3 | -3.9 | 29.1 | 2.5% |
| Jefferson City, MO Metro Area | 3 | -0.7 | 29 | 1.2% |
| Monroe, LA Metro Area | 3 | +1.8 | 28.9 | 8.7% |
| College Station-Bryan, TX Metro Area | 3 | +0.1 | 28.9 | 10.3% |
| Rome, GA Metro Area | 3 | -0.1 | 28.6 | 1.9% |
| Sebastian-Vero Beach, FL Metro Area | 3 | +0.5 | 28.6 | 9.4% |
| Michigan City-La Porte, IN Metro Area | 3 | -3.9 | 28.5 | 1.2% |
| Bismarck, ND Metro Area | 3 | -0.7 | 28.3 | 9.9% |
| Savannah, GA Metro Area | 3 | +0.7 | 28.2 | 7.9% |
| El Paso, TX Metro Area | 3 | +1.3 | 28.1 | 3.7% |
| Medford, OR Metro Area | 3 | -3.6 | 27.6 | 4.4% |
| Athens-Clarke County, GA Metro Area | 3 | -4.7 | 27.6 | 6.3% |
| Virginia Beach-Norfolk-Newport News, VA-NC Metro Area | 3 | -1.6 | 26.6 | 3% |
| Jacksonville, NC Metro Area | 3 | -5.9 | 25.3 | 7.3% |
| Pensacola-Ferry Pass-Brent, FL Metro Area | 3 | -1.3 | 25.3 | 6.6% |
| Tucson, AZ Metro Area | 3 | -0.7 | 24.7 | 3.7% |
| Deltona-Daytona Beach-Ormond Beach, FL Metro Area | 3 | -1.8 | 23.5 | 17.8% |
| Yakima, WA Metro Area | 3 | -2.8 | 23.1 | 2.1% |
| Fayetteville, NC Metro Area | 3 | -3.8 | 22.8 | 14.9% |
| Washington-Arlington-Alexandria, DC-VA-MD-WV Metro Area | 3 | -2 | 22.6 | 5.8% |
| Santa Fe, NM Metro Area | 3 | -1.6 | 21.7 | 2.7% |
| Greensboro-High Point, NC Metro Area | 3 | -0.7 | 21.3 | 3.7% |
| New Haven-Milford, CT Metro Area | 3 | -3.7 | 19.9 | 1.2% |
| Ames, IA Metro Area | 3 | -10.3 | 19.5 | 17.5% |
| Tuscaloosa, AL Metro Area | 3 | -2.7 | 16.8 | 9.9% |
| Montgomery, AL Metro Area | 3 | -1.5 | 16.6 | 2.8% |
| Riverside-San Bernardino-Ontario, CA Metro Area | 3 | -1.4 | 15.7 | 4.7% |
| Columbus, GA-AL Metro Area | 3 | -4.2 | 14.9 | 5.6% |
| Fresno, CA Metro Area | 3 | -1.8 | 14.1 | 5.9% |
| Pueblo, CO Metro Area | 3 | -4.6 | 13.7 | 3.1% |
| Longview, TX Metro Area | 3 | -1.3 | 10.8 | 15.7% |
| Tyler, TX Metro Area | 3 | -2.3 | 9.9 | 6.5% |
| Sumter, SC Metro Area | 3 | -2.2 | 9.6 | 21.4% |
| Hot Springs, AR Metro Area | 3 | -2.9 | 8.3 | 1.8% |
| Hattiesburg, MS Metro Area | 3 | -1.9 | 7.2 | 7.3% |
| Modesto, CA Metro Area | 3 | -0.9 | 7 | 3.5% |
| Jackson, TN Metro Area | 3 | -5 | 5.1 | 26% |
| Morgantown, WV Metro Area | 3 | -7.2 | 1.3 | 4.3% |

**Summary:** 108 metros meet â‰¥3 YIMBY criteria, including 26 with perfect scores.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ===========================</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># YIMBY Criteria Distribution</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ===========================</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>criteria_stats <span class="ot">&lt;-</span> yimby_analysis <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_early_burden =</span> <span class="fu">sum</span>(high_early_burden, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">decreasing_burden =</span> <span class="fu">sum</span>(decreasing_burden, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">positive_pop_growth =</span> <span class="fu">sum</span>(positive_pop_growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_housing_growth =</span> <span class="fu">sum</span>(high_housing_growth, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_metros =</span> <span class="fu">n</span>()</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">**YIMBY Criteria Distribution:**</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
**YIMBY Criteria Distribution:**</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- High early rent burden:"</span>, criteria_stats<span class="sc">$</span>high_early_burden, <span class="st">"metros</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>- High early rent burden: 121 metros</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Decreasing rent burden:"</span>, criteria_stats<span class="sc">$</span>decreasing_burden, <span class="st">"metros</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>- Decreasing rent burden: 105 metros</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Positive population growth:"</span>, criteria_stats<span class="sc">$</span>positive_pop_growth, <span class="st">"metros</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>- Positive population growth: 243 metros</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- High housing growth:"</span>, criteria_stats<span class="sc">$</span>high_housing_growth, <span class="st">"metros</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>- High housing growth: 121 metros</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Total metros analyzed:"</span>, criteria_stats<span class="sc">$</span>total_metros, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>- Total metros analyzed: 243 </code></pre>
</div>
</div>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4"></h3>
</section>
<section id="task-7-policy-brief" class="level2">
<h2 class="anchored" data-anchor-id="task-7-policy-brief">Task 7: Policy Brief</h2>
</section>
</section>
<section id="policy-brief-federal-incentives-for-pro-housing-yimby-policies" class="level1">
<h1>Policy Brief: Federal Incentives for Pro-Housing (YIMBY) Policies</h1>
<section id="goal" class="level2">
<h2 class="anchored" data-anchor-id="goal">Goal:</h2>
<p>Encourage municipalities to adopt pro-housing policies that reduce rent burdens, stimulate housing development, and strengthen local economies. Federal support will include grants, technical assistance, and recognition for successful â€œYIMBYâ€ cities.</p>
</section>
<section id="proposed-congressional-sponsors" class="level2">
<h2 class="anchored" data-anchor-id="proposed-congressional-sponsors">Proposed Congressional Sponsors</h2>
<ul>
<li><p><strong>Primary Sponsor:</strong> Representative from New York City, NY â€“ a high-YIMBY city with demonstrated housing growth and moderate rent burden.</p></li>
<li><p><strong>Co-Sponsor:</strong> Representative from Houston, TX â€“ a city with high rent burden and low housing development, primed to benefit from federal incentives.</p></li>
</ul>
</section>
<section id="why-this-matters-locally" class="level2">
<h2 class="anchored" data-anchor-id="why-this-matters-locally">Why This Matters Locally</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame with safe column names (no spaces)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>local_impact <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">City =</span> <span class="fu">c</span>(<span class="st">"New York City"</span>, <span class="st">"Houston"</span>),</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Issue =</span> <span class="fu">c</span>(<span class="st">"Moderate rent, growing housing supply"</span>, </span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"High rent, slow housing growth"</span>),</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">How_Bill_Helps =</span> <span class="fu">c</span>(<span class="st">"Reinforces successful YIMBY policies, sets a model for other cities"</span>,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Grants and incentives unlock new housing, reduce cost of living, and stimulate growth"</span>),</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate gt table</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>local_impact <span class="sc">%&gt;%</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Why This Matters Locally"</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">City =</span> <span class="st">"City"</span>,</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Issue =</span> <span class="st">"Issue"</span>,</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">How_Bill_Helps =</span> <span class="st">"How Bill Helps"</span></span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_markdown</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.names =</span> <span class="st">"Arial"</span>,</span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.title.font.size =</span> <span class="dv">14</span>,</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.border.top.width =</span> <span class="dv">1</span>,</span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.border.bottom.width =</span> <span class="dv">1</span></span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="vrbogmbcvc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vrbogmbcvc table {
  font-family: Arial;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vrbogmbcvc thead, #vrbogmbcvc tbody, #vrbogmbcvc tfoot, #vrbogmbcvc tr, #vrbogmbcvc td, #vrbogmbcvc th {
  border-style: none;
}

#vrbogmbcvc p {
  margin: 0;
  padding: 0;
}

#vrbogmbcvc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vrbogmbcvc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vrbogmbcvc .gt_title {
  color: #333333;
  font-size: 14px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vrbogmbcvc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vrbogmbcvc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vrbogmbcvc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vrbogmbcvc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vrbogmbcvc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vrbogmbcvc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vrbogmbcvc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vrbogmbcvc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vrbogmbcvc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vrbogmbcvc .gt_spanner_row {
  border-bottom-style: hidden;
}

#vrbogmbcvc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vrbogmbcvc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vrbogmbcvc .gt_from_md > :first-child {
  margin-top: 0;
}

#vrbogmbcvc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vrbogmbcvc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vrbogmbcvc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vrbogmbcvc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vrbogmbcvc .gt_row_group_first td {
  border-top-width: 2px;
}

#vrbogmbcvc .gt_row_group_first th {
  border-top-width: 2px;
}

#vrbogmbcvc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrbogmbcvc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vrbogmbcvc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vrbogmbcvc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vrbogmbcvc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrbogmbcvc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vrbogmbcvc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vrbogmbcvc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vrbogmbcvc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vrbogmbcvc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vrbogmbcvc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrbogmbcvc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vrbogmbcvc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrbogmbcvc .gt_left {
  text-align: left;
}

#vrbogmbcvc .gt_center {
  text-align: center;
}

#vrbogmbcvc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vrbogmbcvc .gt_font_normal {
  font-weight: normal;
}

#vrbogmbcvc .gt_font_bold {
  font-weight: bold;
}

#vrbogmbcvc .gt_font_italic {
  font-style: italic;
}

#vrbogmbcvc .gt_super {
  font-size: 65%;
}

#vrbogmbcvc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vrbogmbcvc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vrbogmbcvc .gt_indent_1 {
  text-indent: 5px;
}

#vrbogmbcvc .gt_indent_2 {
  text-indent: 10px;
}

#vrbogmbcvc .gt_indent_3 {
  text-indent: 15px;
}

#vrbogmbcvc .gt_indent_4 {
  text-indent: 20px;
}

#vrbogmbcvc .gt_indent_5 {
  text-indent: 25px;
}

#vrbogmbcvc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#vrbogmbcvc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Why This Matters Locally</td>
</tr>
<tr class="gt_col_headings even">
<th id="City" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">City</th>
<th id="Issue" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Issue</th>
<th id="How_Bill_Helps" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">How Bill Helps</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="City">New York City</td>
<td class="gt_row gt_left" headers="Issue">Moderate rent, growing housing supply</td>
<td class="gt_row gt_left" headers="How_Bill_Helps">Reinforces successful YIMBY policies, sets a model for other cities</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="City">Houston</td>
<td class="gt_row gt_left" headers="Issue">High rent, slow housing growth</td>
<td class="gt_row gt_left" headers="How_Bill_Helps">Grants and incentives unlock new housing, reduce cost of living, and stimulate growth</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="key-occupations-benefiting" class="level2">
<h2 class="anchored" data-anchor-id="key-occupations-benefiting">Key Occupations Benefiting</h2>
<ol type="1">
<li>Firefighters &amp; Public Safety Workers</li>
</ol>
<ul>
<li><p>High rent burdens strain household budgets.</p></li>
<li><p>Policy reduces cost-of-living pressures, increasing financial stability.</p></li>
<li><p>Union advocacy strengthens political support for the bill.</p></li>
</ul>
<ol start="2" type="1">
<li>Musicians &amp; Arts Professionals</li>
</ol>
<ul>
<li><p>More disposable income among residents increases attendance at concerts and cultural events.</p></li>
<li><p>Local industry groups can champion the bill, linking housing affordability to economic activity.</p></li>
</ul>
<ol start="3" type="1">
<li>Young Professionals &amp; Creative Workers</li>
</ol>
<ul>
<li><p>Affordable housing increases retention of Millennials and early-career professionals.</p></li>
<li><p>Supports local startups, cultural industries, and creative economic activity.</p></li>
<li><p>Professional associations and creative industry groups can advocate politically for the bill.</p></li>
</ul>
<p>Impact: Lower rent means households have more money for essentials, leisure, and local services, boosting economic activity city-wide.</p>
</section>
<section id="metrics-to-guide-federal-support" class="level2">
<h2 class="anchored" data-anchor-id="metrics-to-guide-federal-support">Metrics to Guide Federal Support</h2>
<ul>
<li><p>Rent Burden: Percentage of household income spent on rent; lower percentages indicate affordability.</p></li>
<li><p>Housing Growth: Rate of new housing units added; higher growth indicates effective YIMBY policies.</p></li>
<li><p>Funding Targeting: Cities with high rent burdens and low housing growth are top candidates for grants; cities with successful YIMBY implementation serve as models.</p></li>
<li><p>Millennial Population: Percentage of residents aged 25â€“39. Cities with higher Millennial representation may benefit more quickly from YIMBY-friendly policies and help generate political momentum for adoption.</p></li>
</ul>
</section>
<section id="call-to-action" class="level2">
<h2 class="anchored" data-anchor-id="call-to-action">Call to Action</h2>
<ul>
<li><p>For Sponsors: Promote housing affordability, economic growth, and equitable development in your districts.</p></li>
<li><p>For Constituents: Rally unions, trade associations, and local organizations to support pro-housing policies.</p></li>
<li><p>For Legal Staff: Use rent burden and housing growth metrics to define eligibility criteria and performance benchmarks for grants.</p></li>
</ul>
<p>Bottom Line: Supporting this bill allows cities to expand housing supply, reduce rent pressures, and create vibrant, economically healthy communities.</p>
<hr>
<p>This work Â©2025 by rahicodes was initially prepared as a Mini-Project for STA 9750 at Baruch College.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/rahicodes\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>